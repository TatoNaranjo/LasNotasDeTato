/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var _i=Object.create;var Cr=Object.defineProperty;var Ai=Object.getOwnPropertyDescriptor;var ji=Object.getOwnPropertyNames;var Gi=Object.getPrototypeOf,Pi=Object.prototype.hasOwnProperty;var Wo=r=>Cr(r,"__esModule",{value:!0});var Oi=(r,t)=>{Wo(r);for(var n in t)Cr(r,n,{get:t[n],enumerable:!0})},Ei=(r,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ji(t))!Pi.call(r,o)&&o!=="default"&&Cr(r,o,{get:()=>t[o],enumerable:!(n=Ai(t,o))||n.enumerable});return r},Jt=r=>Ei(Wo(Cr(r!=null?_i(Gi(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var q=(r,t,n)=>new Promise((o,i)=>{var c=u=>{try{f(n.next(u))}catch(p){i(p)}},l=u=>{try{f(n.throw(u))}catch(p){i(p)}},f=u=>u.done?o(u.value):Promise.resolve(u.value).then(c,l);f((n=n.apply(r,t)).next())});Oi(exports,{default:()=>Qn});var jt=Jt(require("obsidian"));var Pe=Jt(require("obsidian")),gn=class extends Pe.Modal{constructor(t,n,o,i){super(t.app);this.api=n;this.query=o;this.callback=i;this.isBusy=!1}setBusy(t){var n,o;this.isBusy=t,(n=this.okBtnRef)==null||n.setDisabled(t),(o=this.okBtnRef)==null||o.setButtonText(t?"Requesting...":"Search")}searchGame(){return q(this,null,function*(){if(!this.query)throw new Error("No query entered.");if(!this.isBusy){try{this.setBusy(!0);let t=yield this.api.getByQuery(this.query);if(this.setBusy(!1),!(t==null?void 0:t.length)){new Pe.Notice(`No results found for "${this.query}"`);return}this.callback(null,t)}catch(t){this.callback(t)}this.close()}})}submitEnterCallback(t){t.key==="Enter"&&!t.isComposing&&this.searchGame()}onOpen(){let{contentEl:t}=this;t.createEl("h2",{text:"Search Game"}),t.createDiv({cls:"game-search-plugin__search-modal--input"},n=>{new Pe.TextComponent(n).setValue(this.query).setPlaceholder("Search by title").onChange(o=>this.query=o).inputEl.addEventListener("keydown",this.submitEnterCallback.bind(this))}),new Pe.Setting(t).addButton(n=>this.okBtnRef=n.setButtonText("Search").setCta().onClick(()=>{this.searchGame()}))}onClose(){this.contentEl.empty()}};var Mo=Jt(require("obsidian"));var Ir=r=>{let t=r.released;return t.substring(0,t.indexOf("-"))};var hn=class extends Mo.SuggestModal{constructor(t,n,o,i){super(t);this.api=n;this.suggestion=o;this.onChoose=i}getSuggestions(t){return this.suggestion}renderSuggestion(t,n){let o=t.name,i=t.released?`(${Ir(t)})`:"";n.createEl("div",{text:o}),n.createEl("small",{text:i})}onChooseSuggestion(t){return q(this,null,function*(){let n=yield this.api.getBySlugOrId(t.slug);this.onChoose(null,n)})}};var Wr=Jt(require("obsidian")),vn=class extends Wr.Modal{constructor(t,n){super(t);this.onSubmit=n}onOpen(){let{contentEl:t}=this;t.setText("Please confirm you want to completely destroy and recreate your game notes folder"),new Wr.Setting(t).addButton(n=>n.setButtonText("Submit").setCta().onClick(()=>{this.close(),this.onSubmit()}))}onClose(){let{contentEl:t}=this;t.empty()}};var No=Jt(require("obsidian")),yn=class{constructor(t){this.app=t}jumpToNextCursorLocation(){return q(this,null,function*(){let t=this.app.workspace.getActiveViewOfType(No.MarkdownView);if(!t)return;let o=(yield this.app.vault.cachedRead(t.file)).length+1,i=t.editor;i.focus(),i.setCursor(o,0)})}};var Rt=Jt(require("obsidian"));var Do=/^-?[0-9]*$/,bn=/{{DATE(\+-?[0-9]+)?}}/,wn=/{{DATE:([^}\n\r+]*)(\+-?[0-9]+)?}}/;function ki(r){return r.replace(/[[\]\\/:?|^#]/g,"").replace(/\s+/g," ")}function Mr(r,t){let n;return t?n=Sn(r,Nr(t)):n=r.released?`${r.name} (${Ir(r)})`:r.name,ki(n)+".md"}function Sn(r,t){if(!(t==null?void 0:t.trim()))return"";r.genres&&(r.genres.toString=function(){return JSON.stringify(this)}),r.platforms&&(r.platforms.toString=function(){return JSON.stringify(this)}),r.tags&&(r.tags.toString=function(){return JSON.stringify(this)}),r.stores&&(r.stores.toString=function(){return JSON.stringify(this)});let n=r;return n&&(n.developers&&(n.developers.toString=function(){return JSON.stringify(this)}),n.publishers&&(n.publishers.toString=function(){return JSON.stringify(this)}),n.metacritic_platforms&&(n.metacritic_platforms.toString=function(){return JSON.stringify(this)}),n.stores&&(r.stores.toString=function(){return JSON.stringify(this)})),Object.entries(r).reduce((i,[c,l=""])=>i.replace(new RegExp(`{{${c}}}`,"ig"),typeof l=="object"&&l!==null&&"name"in l?l.name:l),t).replace(/{{\w+}}/gi,"").trim()}function Bo(r){let t;return(r==null?void 0:r.offset)!==null&&(r==null?void 0:r.offset)!==void 0&&typeof r.offset=="number"&&(t=window.moment.duration(r.offset,"days")),(r==null?void 0:r.format)?window.moment().add(t).format(r==null?void 0:r.format):window.moment().add(t).format("YYYY-MM-DD")}function Nr(r){let t=r;for(;bn.test(t);){let n=bn.exec(t),o=0;if(n==null?void 0:n[1]){let i=n[1].replace("+","").trim();Do.test(i)&&(o=parseInt(i))}t=Lo(t,bn,Bo({offset:o}))}for(;wn.test(t);){let n=wn.exec(t),o=n==null?void 0:n[1],i=0;if(n==null?void 0:n[2]){let c=n[2].replace("+","").trim();Do.test(c)&&(i=parseInt(c))}t=Lo(t,wn,Bo({format:o,offset:i}))}return t}function Lo(r,t,n){return r.replace(t,function(){return n})}function Ke(r){if(!r||r.size<=0||!(r instanceof Map))return"";let t="";for(let[n,o]of r)t+=n+": "+o+`
`;return t.trim()}function ee(r){let t=new Map;if(!r)return t;let n=r.split(`
`);for(let o=0;o<n.length;o++)if(n[o].contains(":")){let i=n[o].split(/:(.+)/);i[0]&&i[1]&&i[0].trim()&&i[1].trim()&&t.set(i[0].trim(),i[1].trim())}return t}var la=Jt(require("obsidian"));var St="top",Pt="bottom",At="right",xt="left",Dr="auto",Oe=[St,Pt,At,xt],be="start",We="end",zo="clippingParents",Br="viewport",Je="popper",Vo="reference",xn=Oe.reduce(function(r,t){return r.concat([t+"-"+be,t+"-"+We])},[]),Lr=[].concat(Oe,[Dr]).reduce(function(r,t){return r.concat([t,t+"-"+be,t+"-"+We])},[]),Ri="beforeRead",Ti="read",Fi="afterRead",Ci="beforeMain",Ii="main",Wi="afterMain",Mi="beforeWrite",Ni="write",Di="afterWrite",$o=[Ri,Ti,Fi,Ci,Ii,Wi,Mi,Ni,Di];function Et(r){return r?(r.nodeName||"").toLowerCase():null}function ht(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var t=r.ownerDocument;return t&&t.defaultView||window}return r}function re(r){var t=ht(r).Element;return r instanceof t||r instanceof Element}function Ot(r){var t=ht(r).HTMLElement;return r instanceof t||r instanceof HTMLElement}function Ze(r){if(typeof ShadowRoot=="undefined")return!1;var t=ht(r).ShadowRoot;return r instanceof t||r instanceof ShadowRoot}function Bi(r){var t=r.state;Object.keys(t.elements).forEach(function(n){var o=t.styles[n]||{},i=t.attributes[n]||{},c=t.elements[n];!Ot(c)||!Et(c)||(Object.assign(c.style,o),Object.keys(i).forEach(function(l){var f=i[l];f===!1?c.removeAttribute(l):c.setAttribute(l,f===!0?"":f)}))})}function Li(r){var t=r.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(o){var i=t.elements[o],c=t.attributes[o]||{},l=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:n[o]),f=l.reduce(function(u,p){return u[p]="",u},{});!Ot(i)||!Et(i)||(Object.assign(i.style,f),Object.keys(c).forEach(function(u){i.removeAttribute(u)}))})}}var Uo={name:"applyStyles",enabled:!0,phase:"write",fn:Bi,effect:Li,requires:["computeStyles"]};function kt(r){return r.split("-")[0]}var fe=Math.max,Me=Math.min,we=Math.round;function Qe(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function mr(){return!/^((?!chrome|android).)*safari/i.test(Qe())}function ne(r,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var o=r.getBoundingClientRect(),i=1,c=1;t&&Ot(r)&&(i=r.offsetWidth>0&&we(o.width)/r.offsetWidth||1,c=r.offsetHeight>0&&we(o.height)/r.offsetHeight||1);var l=re(r)?ht(r):window,f=l.visualViewport,u=!mr()&&n,p=(o.left+(u&&f?f.offsetLeft:0))/i,m=(o.top+(u&&f?f.offsetTop:0))/c,d=o.width/i,y=o.height/c;return{width:d,height:y,top:m,right:p+d,bottom:m+y,left:p,x:p,y:m}}function Ne(r){var t=ne(r),n=r.offsetWidth,o=r.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:r.offsetLeft,y:r.offsetTop,width:n,height:o}}function pr(r,t){var n=t.getRootNode&&t.getRootNode();if(r.contains(t))return!0;if(n&&Ze(n)){var o=t;do{if(o&&r.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Vt(r){return ht(r).getComputedStyle(r)}function _n(r){return["table","td","th"].indexOf(Et(r))>=0}function Mt(r){return((re(r)?r.ownerDocument:r.document)||window.document).documentElement}function Se(r){return Et(r)==="html"?r:r.assignedSlot||r.parentNode||(Ze(r)?r.host:null)||Mt(r)}function qo(r){return!Ot(r)||Vt(r).position==="fixed"?null:r.offsetParent}function zi(r){var t=/firefox/i.test(Qe()),n=/Trident/i.test(Qe());if(n&&Ot(r)){var o=Vt(r);if(o.position==="fixed")return null}var i=Se(r);for(Ze(i)&&(i=i.host);Ot(i)&&["html","body"].indexOf(Et(i))<0;){var c=Vt(i);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return i;i=i.parentNode}return null}function me(r){for(var t=ht(r),n=qo(r);n&&_n(n)&&Vt(n).position==="static";)n=qo(n);return n&&(Et(n)==="html"||Et(n)==="body"&&Vt(n).position==="static")?t:n||zi(r)||t}function De(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Be(r,t,n){return fe(r,Me(t,n))}function Ho(r,t,n){var o=Be(r,t,n);return o>n?n:o}function dr(){return{top:0,right:0,bottom:0,left:0}}function gr(r){return Object.assign({},dr(),r)}function hr(r,t){return t.reduce(function(n,o){return n[o]=r,n},{})}var Vi=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,gr(typeof t!="number"?t:hr(t,Oe))};function $i(r){var t,n=r.state,o=r.name,i=r.options,c=n.elements.arrow,l=n.modifiersData.popperOffsets,f=kt(n.placement),u=De(f),p=[xt,At].indexOf(f)>=0,m=p?"height":"width";if(!(!c||!l)){var d=Vi(i.padding,n),y=Ne(c),b=u==="y"?St:xt,j=u==="y"?Pt:At,g=n.rects.reference[m]+n.rects.reference[u]-l[u]-n.rects.popper[m],v=l[u]-n.rects.reference[u],x=me(c),G=x?u==="y"?x.clientHeight||0:x.clientWidth||0:0,W=g/2-v/2,T=d[b],C=G-y[m]-d[j],D=G/2-y[m]/2+W,K=Be(T,D,C),tt=u;n.modifiersData[o]=(t={},t[tt]=K,t.centerOffset=K-D,t)}}function Ui(r){var t=r.state,n=r.options,o=n.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!pr(t.elements.popper,i)||(t.elements.arrow=i))}var Yo={name:"arrow",enabled:!0,phase:"main",fn:$i,effect:Ui,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oe(r){return r.split("-")[1]}var qi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hi(r,t){var n=r.x,o=r.y,i=t.devicePixelRatio||1;return{x:we(n*i)/i||0,y:we(o*i)/i||0}}function Xo(r){var t,n=r.popper,o=r.popperRect,i=r.placement,c=r.variation,l=r.offsets,f=r.position,u=r.gpuAcceleration,p=r.adaptive,m=r.roundOffsets,d=r.isFixed,y=l.x,b=y===void 0?0:y,j=l.y,g=j===void 0?0:j,v=typeof m=="function"?m({x:b,y:g}):{x:b,y:g};b=v.x,g=v.y;var x=l.hasOwnProperty("x"),G=l.hasOwnProperty("y"),W=xt,T=St,C=window;if(p){var D=me(n),K="clientHeight",tt="clientWidth";if(D===ht(n)&&(D=Mt(n),Vt(D).position!=="static"&&f==="absolute"&&(K="scrollHeight",tt="scrollWidth")),D=D,i===St||(i===xt||i===At)&&c===We){T=Pt;var Q=d&&D===C&&C.visualViewport?C.visualViewport.height:D[K];g-=Q-o.height,g*=u?1:-1}if(i===xt||(i===St||i===Pt)&&c===We){W=At;var ct=d&&D===C&&C.visualViewport?C.visualViewport.width:D[tt];b-=ct-o.width,b*=u?1:-1}}var dt=Object.assign({position:f},p&&qi),Tt=m===!0?Hi({x:b,y:g},ht(n)):{x:b,y:g};if(b=Tt.x,g=Tt.y,u){var yt;return Object.assign({},dt,(yt={},yt[T]=G?"0":"",yt[W]=x?"0":"",yt.transform=(C.devicePixelRatio||1)<=1?"translate("+b+"px, "+g+"px)":"translate3d("+b+"px, "+g+"px, 0)",yt))}return Object.assign({},dt,(t={},t[T]=G?g+"px":"",t[W]=x?b+"px":"",t.transform="",t))}function Yi(r){var t=r.state,n=r.options,o=n.gpuAcceleration,i=o===void 0?!0:o,c=n.adaptive,l=c===void 0?!0:c,f=n.roundOffsets,u=f===void 0?!0:f,p={placement:kt(t.placement),variation:oe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Xo(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Xo(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Ko={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Yi,data:{}};var zr={passive:!0};function Xi(r){var t=r.state,n=r.instance,o=r.options,i=o.scroll,c=i===void 0?!0:i,l=o.resize,f=l===void 0?!0:l,u=ht(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&p.forEach(function(m){m.addEventListener("scroll",n.update,zr)}),f&&u.addEventListener("resize",n.update,zr),function(){c&&p.forEach(function(m){m.removeEventListener("scroll",n.update,zr)}),f&&u.removeEventListener("resize",n.update,zr)}}var Jo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xi,data:{}};var Ki={left:"right",right:"left",bottom:"top",top:"bottom"};function tr(r){return r.replace(/left|right|bottom|top/g,function(t){return Ki[t]})}var Ji={start:"end",end:"start"};function Vr(r){return r.replace(/start|end/g,function(t){return Ji[t]})}function Le(r){var t=ht(r),n=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:n,scrollTop:o}}function ze(r){return ne(Mt(r)).left+Le(r).scrollLeft}function An(r,t){var n=ht(r),o=Mt(r),i=n.visualViewport,c=o.clientWidth,l=o.clientHeight,f=0,u=0;if(i){c=i.width,l=i.height;var p=mr();(p||!p&&t==="fixed")&&(f=i.offsetLeft,u=i.offsetTop)}return{width:c,height:l,x:f+ze(r),y:u}}function jn(r){var t,n=Mt(r),o=Le(r),i=(t=r.ownerDocument)==null?void 0:t.body,c=fe(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=fe(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),f=-o.scrollLeft+ze(r),u=-o.scrollTop;return Vt(i||n).direction==="rtl"&&(f+=fe(n.clientWidth,i?i.clientWidth:0)-c),{width:c,height:l,x:f,y:u}}function Ve(r){var t=Vt(r),n=t.overflow,o=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+o)}function $r(r){return["html","body","#document"].indexOf(Et(r))>=0?r.ownerDocument.body:Ot(r)&&Ve(r)?r:$r(Se(r))}function Ee(r,t){var n;t===void 0&&(t=[]);var o=$r(r),i=o===((n=r.ownerDocument)==null?void 0:n.body),c=ht(o),l=i?[c].concat(c.visualViewport||[],Ve(o)?o:[]):o,f=t.concat(l);return i?f:f.concat(Ee(Se(l)))}function er(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function Zi(r,t){var n=ne(r,!1,t==="fixed");return n.top=n.top+r.clientTop,n.left=n.left+r.clientLeft,n.bottom=n.top+r.clientHeight,n.right=n.left+r.clientWidth,n.width=r.clientWidth,n.height=r.clientHeight,n.x=n.left,n.y=n.top,n}function Zo(r,t,n){return t===Br?er(An(r,n)):re(t)?Zi(t,n):er(jn(Mt(r)))}function Qi(r){var t=Ee(Se(r)),n=["absolute","fixed"].indexOf(Vt(r).position)>=0,o=n&&Ot(r)?me(r):r;return re(o)?t.filter(function(i){return re(i)&&pr(i,o)&&Et(i)!=="body"}):[]}function Gn(r,t,n,o){var i=t==="clippingParents"?Qi(r):[].concat(t),c=[].concat(i,[n]),l=c[0],f=c.reduce(function(u,p){var m=Zo(r,p,o);return u.top=fe(m.top,u.top),u.right=Me(m.right,u.right),u.bottom=Me(m.bottom,u.bottom),u.left=fe(m.left,u.left),u},Zo(r,l,o));return f.width=f.right-f.left,f.height=f.bottom-f.top,f.x=f.left,f.y=f.top,f}function vr(r){var t=r.reference,n=r.element,o=r.placement,i=o?kt(o):null,c=o?oe(o):null,l=t.x+t.width/2-n.width/2,f=t.y+t.height/2-n.height/2,u;switch(i){case St:u={x:l,y:t.y-n.height};break;case Pt:u={x:l,y:t.y+t.height};break;case At:u={x:t.x+t.width,y:f};break;case xt:u={x:t.x-n.width,y:f};break;default:u={x:t.x,y:t.y}}var p=i?De(i):null;if(p!=null){var m=p==="y"?"height":"width";switch(c){case be:u[p]=u[p]-(t[m]/2-n[m]/2);break;case We:u[p]=u[p]+(t[m]/2-n[m]/2);break;default:}}return u}function pe(r,t){t===void 0&&(t={});var n=t,o=n.placement,i=o===void 0?r.placement:o,c=n.strategy,l=c===void 0?r.strategy:c,f=n.boundary,u=f===void 0?zo:f,p=n.rootBoundary,m=p===void 0?Br:p,d=n.elementContext,y=d===void 0?Je:d,b=n.altBoundary,j=b===void 0?!1:b,g=n.padding,v=g===void 0?0:g,x=gr(typeof v!="number"?v:hr(v,Oe)),G=y===Je?Vo:Je,W=r.rects.popper,T=r.elements[j?G:y],C=Gn(re(T)?T:T.contextElement||Mt(r.elements.popper),u,m,l),D=ne(r.elements.reference),K=vr({reference:D,element:W,strategy:"absolute",placement:i}),tt=er(Object.assign({},W,K)),Q=y===Je?tt:D,ct={top:C.top-Q.top+x.top,bottom:Q.bottom-C.bottom+x.bottom,left:C.left-Q.left+x.left,right:Q.right-C.right+x.right},dt=r.modifiersData.offset;if(y===Je&&dt){var Tt=dt[i];Object.keys(ct).forEach(function(yt){var Ht=[At,Pt].indexOf(yt)>=0?1:-1,Yt=[St,Pt].indexOf(yt)>=0?"y":"x";ct[yt]+=Tt[Yt]*Ht})}return ct}function Pn(r,t){t===void 0&&(t={});var n=t,o=n.placement,i=n.boundary,c=n.rootBoundary,l=n.padding,f=n.flipVariations,u=n.allowedAutoPlacements,p=u===void 0?Lr:u,m=oe(o),d=m?f?xn:xn.filter(function(j){return oe(j)===m}):Oe,y=d.filter(function(j){return p.indexOf(j)>=0});y.length===0&&(y=d);var b=y.reduce(function(j,g){return j[g]=pe(r,{placement:g,boundary:i,rootBoundary:c,padding:l})[kt(g)],j},{});return Object.keys(b).sort(function(j,g){return b[j]-b[g]})}function ts(r){if(kt(r)===Dr)return[];var t=tr(r);return[Vr(r),t,Vr(t)]}function es(r){var t=r.state,n=r.options,o=r.name;if(!t.modifiersData[o]._skip){for(var i=n.mainAxis,c=i===void 0?!0:i,l=n.altAxis,f=l===void 0?!0:l,u=n.fallbackPlacements,p=n.padding,m=n.boundary,d=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,j=b===void 0?!0:b,g=n.allowedAutoPlacements,v=t.options.placement,x=kt(v),G=x===v,W=u||(G||!j?[tr(v)]:ts(v)),T=[v].concat(W).reduce(function(Zt,Lt){return Zt.concat(kt(Lt)===Dr?Pn(t,{placement:Lt,boundary:m,rootBoundary:d,padding:p,flipVariations:j,allowedAutoPlacements:g}):Lt)},[]),C=t.rects.reference,D=t.rects.popper,K=new Map,tt=!0,Q=T[0],ct=0;ct<T.length;ct++){var dt=T[ct],Tt=kt(dt),yt=oe(dt)===be,Ht=[St,Pt].indexOf(Tt)>=0,Yt=Ht?"width":"height",mt=pe(t,{placement:dt,boundary:m,rootBoundary:d,altBoundary:y,padding:p}),Ft=Ht?yt?At:xt:yt?Pt:St;C[Yt]>D[Yt]&&(Ft=tr(Ft));var de=tr(Ft),Ct=[];if(c&&Ct.push(mt[Tt]<=0),f&&Ct.push(mt[Ft]<=0,mt[de]<=0),Ct.every(function(Zt){return Zt})){Q=dt,tt=!1;break}K.set(dt,Ct)}if(tt)for(var ge=j?3:1,xe=function(Lt){var ie=T.find(function(se){var It=K.get(se);if(It)return It.slice(0,Lt).every(function(Qt){return Qt})});if(ie)return Q=ie,"break"},$t=ge;$t>0;$t--){var ae=xe($t);if(ae==="break")break}t.placement!==Q&&(t.modifiersData[o]._skip=!0,t.placement=Q,t.reset=!0)}}var Qo={name:"flip",enabled:!0,phase:"main",fn:es,requiresIfExists:["offset"],data:{_skip:!1}};function ta(r,t,n){return n===void 0&&(n={x:0,y:0}),{top:r.top-t.height-n.y,right:r.right-t.width+n.x,bottom:r.bottom-t.height+n.y,left:r.left-t.width-n.x}}function ea(r){return[St,At,Pt,xt].some(function(t){return r[t]>=0})}function rs(r){var t=r.state,n=r.name,o=t.rects.reference,i=t.rects.popper,c=t.modifiersData.preventOverflow,l=pe(t,{elementContext:"reference"}),f=pe(t,{altBoundary:!0}),u=ta(l,o),p=ta(f,i,c),m=ea(u),d=ea(p);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:p,isReferenceHidden:m,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":d})}var ra={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rs};function ns(r,t,n){var o=kt(r),i=[xt,St].indexOf(o)>=0?-1:1,c=typeof n=="function"?n(Object.assign({},t,{placement:r})):n,l=c[0],f=c[1];return l=l||0,f=(f||0)*i,[xt,At].indexOf(o)>=0?{x:f,y:l}:{x:l,y:f}}function os(r){var t=r.state,n=r.options,o=r.name,i=n.offset,c=i===void 0?[0,0]:i,l=Lr.reduce(function(m,d){return m[d]=ns(d,t.rects,c),m},{}),f=l[t.placement],u=f.x,p=f.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=p),t.modifiersData[o]=l}var na={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:os};function as(r){var t=r.state,n=r.name;t.modifiersData[n]=vr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var oa={name:"popperOffsets",enabled:!0,phase:"read",fn:as,data:{}};function On(r){return r==="x"?"y":"x"}function is(r){var t=r.state,n=r.options,o=r.name,i=n.mainAxis,c=i===void 0?!0:i,l=n.altAxis,f=l===void 0?!1:l,u=n.boundary,p=n.rootBoundary,m=n.altBoundary,d=n.padding,y=n.tether,b=y===void 0?!0:y,j=n.tetherOffset,g=j===void 0?0:j,v=pe(t,{boundary:u,rootBoundary:p,padding:d,altBoundary:m}),x=kt(t.placement),G=oe(t.placement),W=!G,T=De(x),C=On(T),D=t.modifiersData.popperOffsets,K=t.rects.reference,tt=t.rects.popper,Q=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,ct=typeof Q=="number"?{mainAxis:Q,altAxis:Q}:Object.assign({mainAxis:0,altAxis:0},Q),dt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Tt={x:0,y:0};if(!!D){if(c){var yt,Ht=T==="y"?St:xt,Yt=T==="y"?Pt:At,mt=T==="y"?"height":"width",Ft=D[T],de=Ft+v[Ht],Ct=Ft-v[Yt],ge=b?-tt[mt]/2:0,xe=G===be?K[mt]:tt[mt],$t=G===be?-tt[mt]:-K[mt],ae=t.elements.arrow,Zt=b&&ae?Ne(ae):{width:0,height:0},Lt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:dr(),ie=Lt[Ht],se=Lt[Yt],It=Be(0,K[mt],Zt[mt]),Qt=W?K[mt]/2-ge-It-ie-ct.mainAxis:xe-It-ie-ct.mainAxis,_e=W?-K[mt]/2+ge+It+se+ct.mainAxis:$t+It+se+ct.mainAxis,he=t.elements.arrow&&me(t.elements.arrow),k=he?T==="y"?he.clientTop||0:he.clientLeft||0:0,_=(yt=dt==null?void 0:dt[T])!=null?yt:0,E=Ft+Qt-_-k,R=Ft+_e-_,S=Be(b?Me(de,E):de,Ft,b?fe(Ct,R):Ct);D[T]=S,Tt[T]=S-Ft}if(f){var X,F=T==="x"?St:xt,et=T==="x"?Pt:At,at=D[C],Y=C==="y"?"height":"width",V=at+v[F],B=at-v[et],H=[St,xt].indexOf(x)!==-1,st=(X=dt==null?void 0:dt[C])!=null?X:0,J=H?V:at-K[Y]-tt[Y]-st+ct.altAxis,ut=H?at+K[Y]+tt[Y]-st-ct.altAxis:B,bt=b&&H?Ho(J,at,ut):Be(b?J:V,at,b?ut:B);D[C]=bt,Tt[C]=bt-at}t.modifiersData[o]=Tt}}var aa={name:"preventOverflow",enabled:!0,phase:"main",fn:is,requiresIfExists:["offset"]};function En(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function kn(r){return r===ht(r)||!Ot(r)?Le(r):En(r)}function ss(r){var t=r.getBoundingClientRect(),n=we(t.width)/r.offsetWidth||1,o=we(t.height)/r.offsetHeight||1;return n!==1||o!==1}function Rn(r,t,n){n===void 0&&(n=!1);var o=Ot(t),i=Ot(t)&&ss(t),c=Mt(t),l=ne(r,i,n),f={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&((Et(t)!=="body"||Ve(c))&&(f=kn(t)),Ot(t)?(u=ne(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):c&&(u.x=ze(c))),{x:l.left+f.scrollLeft-u.x,y:l.top+f.scrollTop-u.y,width:l.width,height:l.height}}function cs(r){var t=new Map,n=new Set,o=[];r.forEach(function(c){t.set(c.name,c)});function i(c){n.add(c.name);var l=[].concat(c.requires||[],c.requiresIfExists||[]);l.forEach(function(f){if(!n.has(f)){var u=t.get(f);u&&i(u)}}),o.push(c)}return r.forEach(function(c){n.has(c.name)||i(c)}),o}function Tn(r){var t=cs(r);return $o.reduce(function(n,o){return n.concat(t.filter(function(i){return i.phase===o}))},[])}function Fn(r){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(r())})})),t}}function Cn(r){var t=r.reduce(function(n,o){var i=n[o.name];return n[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,n},{});return Object.keys(t).map(function(n){return t[n]})}var ia={placement:"bottom",modifiers:[],strategy:"absolute"};function sa(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function ca(r){r===void 0&&(r={});var t=r,n=t.defaultModifiers,o=n===void 0?[]:n,i=t.defaultOptions,c=i===void 0?ia:i;return function(f,u,p){p===void 0&&(p=c);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},ia,c),modifiersData:{},elements:{reference:f,popper:u},attributes:{},styles:{}},d=[],y=!1,b={state:m,setOptions:function(x){var G=typeof x=="function"?x(m.options):x;g(),m.options=Object.assign({},c,m.options,G),m.scrollParents={reference:re(f)?Ee(f):f.contextElement?Ee(f.contextElement):[],popper:Ee(u)};var W=Tn(Cn([].concat(o,m.options.modifiers)));return m.orderedModifiers=W.filter(function(T){return T.enabled}),j(),b.update()},forceUpdate:function(){if(!y){var x=m.elements,G=x.reference,W=x.popper;if(!!sa(G,W)){m.rects={reference:Rn(G,me(W),m.options.strategy==="fixed"),popper:Ne(W)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(ct){return m.modifiersData[ct.name]=Object.assign({},ct.data)});for(var T=0;T<m.orderedModifiers.length;T++){if(m.reset===!0){m.reset=!1,T=-1;continue}var C=m.orderedModifiers[T],D=C.fn,K=C.options,tt=K===void 0?{}:K,Q=C.name;typeof D=="function"&&(m=D({state:m,options:tt,name:Q,instance:b})||m)}}}},update:Fn(function(){return new Promise(function(v){b.forceUpdate(),v(m)})}),destroy:function(){g(),y=!0}};if(!sa(f,u))return b;b.setOptions(p).then(function(v){!y&&p.onFirstUpdate&&p.onFirstUpdate(v)});function j(){m.orderedModifiers.forEach(function(v){var x=v.name,G=v.options,W=G===void 0?{}:G,T=v.effect;if(typeof T=="function"){var C=T({state:m,name:x,instance:b,options:W}),D=function(){};d.push(C||D)}})}function g(){d.forEach(function(v){return v()}),d=[]}return b}}var ls=[Jo,oa,Ko,Uo,na,Qo,aa,Yo,ra],In=ca({defaultModifiers:ls});var us=(r,t)=>(r%t+t)%t,ua=class{constructor(t,n,o){this.owner=t,this.containerEl=n,n.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),n.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),o.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),o.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),o.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(t,n){t.preventDefault();let o=this.suggestions.indexOf(n);this.setSelectedItem(o,!1),this.useSelectedItem(t)}onSuggestionMouseover(t,n){let o=this.suggestions.indexOf(n);this.setSelectedItem(o,!1)}setSuggestions(t){this.containerEl.empty();let n=[];t.forEach(o=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(o,i),n.push(i)}),this.values=t,this.suggestions=n,this.setSelectedItem(0,!1)}useSelectedItem(t){let n=this.values[this.selectedItem];n&&this.owner.selectSuggestion(n,t)}setSelectedItem(t,n){let o=us(t,this.suggestions.length),i=this.suggestions[this.selectedItem],c=this.suggestions[o];i==null||i.removeClass("is-selected"),c==null||c.addClass("is-selected"),this.selectedItem=o,n&&c.scrollIntoView(!1)}},$e=class{constructor(t,n){this.app=t;this.inputEl=n;this.scope=new la.Scope,this.suggestEl=createDiv("suggestion-container");let o=this.suggestEl.createDiv("suggestion");this.suggest=new ua(this,o,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",i=>{i.preventDefault()})}onInputChanged(){let t=this.inputEl.value,n=this.getSuggestions(t);if(!n){this.close();return}n.length>0?(this.suggest.setSuggestions(n),this.open(this.app.dom.appContainerEl,this.inputEl)):this.close()}open(t,n){this.app.keymap.pushScope(this.scope),t.appendChild(this.suggestEl),this.popper=In(n,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:o,instance:i})=>{let c=`${o.rects.reference.width}px`;o.styles.popper.width!==c&&(o.styles.popper.width=c,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){this.app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};var fs="{{DATE}}",fa="{{DATE:}}",ms=/{{D?A?T?E?}?}?$/i,ps=/{{D?A?T?E?:?$|{{DATE:[^\n\r}]*}}$/i,ds="{{author}}",gs=/{{a?u?t?h?o?r?}?}?$/i,hs="{{title}}",vs=/{{t?i?t?l?e?}?}?$/i,Wn=class extends $e{constructor(t,n){super(t,n);this.app=t;this.inputEl=n;this.lastInput=""}getSuggestions(t){let n=this.inputEl.selectionStart,o=15,i=t.substr(n-o,o),c=[];return this.processToken(i,(l,f)=>{this.lastInput=l[0],c.push(f)}),c}selectSuggestion(t){let n=this.inputEl.selectionStart,o=this.lastInput.length,i=this.inputEl.value,c=0,l=(f,u=0)=>`${i.substr(0,n-o+u)}${f}${i.substr(n)}`;this.processToken(t,(f,u)=>{t.contains(u)&&(this.inputEl.value=l(t),c=n-o+t.length,t===fa&&(c-=2))}),this.inputEl.trigger("input"),this.close(),this.inputEl.setSelectionRange(c,c)}renderSuggestion(t,n){t&&n.setText(t)}processToken(t,n){let o=ps.exec(t);o&&n(o,fa);let i=ms.exec(t);i&&n(i,fs);let c=gs.exec(t);c&&n(c,ds);let l=vs.exec(t);l&&n(l,hs)}};var ma=Jt(require("obsidian"));var Mn=class extends $e{getSuggestions(t){let n=this.app.vault.getAllLoadedFiles(),o=[],i=t.toLowerCase();return n.forEach(c=>{c instanceof ma.TFolder&&c.path.toLowerCase().contains(i)&&o.push(c)}),o}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var pa=Jt(require("obsidian"));var Nn=class extends $e{getSuggestions(t){let n=this.app.vault.getAllLoadedFiles(),o=[],i=t.toLowerCase();return n.forEach(c=>{c instanceof pa.TFile&&c.extension==="md"&&c.path.toLowerCase().contains(i)&&o.push(c)}),o}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.inputEl.value=t.path,this.inputEl.trigger("input"),this.close()}};var ys="https://github.com/CMorooney/obsidian-game-search-plugin",da={folder:"",fileNameFormat:"",templateFile:"",rawgApiKey:"",steamApiKey:null,steamUserId:null,syncSteamOnStart:!1,syncSteamPlaytimeOnStart:!1,tryFindSteamGameOnCreate:!1,metaDataForOwnedSteamGames:null,metaDataForWishlistedSteamGames:null},Dn=class extends Rt.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}get settings(){return this.plugin.settings}display(){let{containerEl:t}=this;t.empty(),t.classList.add("game-search-plugin__settings"),Bn(t,"General Settings"),new Rt.Setting(t).setName("RAWG Api Key").addTextArea(d=>{let y=this.plugin.settings.rawgApiKey;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.rawgApiKey=j,yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("New file location").setDesc("New game notes will be placed here.").addSearch(d=>{try{new Mn(this.app,d.inputEl)}catch(y){}d.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.folder).onChange(y=>{this.plugin.settings.folder=y,this.plugin.saveSettings()})});let n=Nr(this.plugin.settings.fileNameFormat)||"{{name}} - {{release}}";new Rt.Setting(t).setClass("game-search-plugin__settings--new_file_name").setName("New file name").setDesc("Enter the file name format.").addSearch(d=>{try{new Wn(this.app,d.inputEl)}catch(y){}d.setPlaceholder("Example: {{name}} - {{release}}").setValue(this.plugin.settings.fileNameFormat).onChange(y=>{this.plugin.settings.fileNameFormat=y==null?void 0:y.trim(),this.plugin.saveSettings(),n=Nr(y)||"{{name}} - {{release}}"})});let o=document.createDocumentFragment().createEl("code",{text:n});t.createEl("div",{cls:["setting-item-description","game-search-plugin__settings--new_file_name_hint"]}).append(o);let i=document.createDocumentFragment();i.createDiv({text:"Files will be available as templates."}),i.createEl("a",{text:"Example Template",href:`${ys}#example-template`}),new Rt.Setting(t).setName("Template file").setDesc(i).addSearch(d=>{try{new Nn(this.app,d.inputEl)}catch(y){}d.setPlaceholder("Example: templates/template-file").setValue(this.plugin.settings.templateFile).onChange(y=>{this.plugin.settings.templateFile=y,this.plugin.saveSettings()})}),Bn(t,"Steam Settings"),new Rt.Setting(t).setName("Steam Api Key").addTextArea(d=>{let y=this.plugin.settings.steamApiKey;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.steamApiKey=j,yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Steam Id").addTextArea(d=>{let y=this.plugin.settings.steamUserId;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.steamUserId=j,yield this.plugin.saveSettings()}))});let c=document.createDocumentFragment();c.createDiv({text:"automatically add metadata to games you own on steam"}),c.createDiv({text:"enter each metadata key/value on a single line separated by a single colon, e.g."}),c.createDiv({text:"owned:true"}),c.createDiv({text:"owned_platform:steam"}),new Rt.Setting(t).setName("metadata for owned Steam games").setDesc(c).addTextArea(d=>{let y=this.plugin.settings.metaDataForOwnedSteamGames;d.setValue(y).onChange(b=>q(this,null,function*(){try{let j=ee(b);j.size>0&&(this.plugin.settings.metaDataForOwnedSteamGames=Ke(j),yield this.plugin.saveSettings())}catch(j){console.warn(j)}}))});let l=document.createDocumentFragment();l.createDiv({text:"automatically add metadata to games you wishlist on steam"}),l.createDiv({text:"enter each metadata key/value on a single line separated by a single colon, e.g."}),l.createDiv({text:"owned:false"}),l.createDiv({text:"status:backlog"}),new Rt.Setting(t).setName("metadata for wishlisted Steam games").setDesc(l).addTextArea(d=>{let y=this.plugin.settings.metaDataForWishlistedSteamGames;d.setValue(y).onChange(b=>q(this,null,function*(){try{let j=ee(b);j.size>0&&(this.plugin.settings.metaDataForWishlistedSteamGames=Ke(j),yield this.plugin.saveSettings())}catch(j){console.warn(j),new Rt.Notice("unable to parse metadata for wishlisted steam games")}}))});let f=document.createDocumentFragment();f.createDiv({text:"performs steam sync when the plugin loads"}),new Rt.Setting(t).setName("Sync on start").setDesc(f).addToggle(d=>{let y=this.plugin.settings.syncSteamOnStart;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.syncSteamOnStart=j,yield this.plugin.saveSettings()}))});let u=document.createDocumentFragment();u.createDiv({text:"update steam_playtime_forever and steam_playtime_2weeks for any notes with steam_id on plugin load"}),new Rt.Setting(t).setName("Sync playtime on start").setDesc(u).addToggle(d=>{let y=this.plugin.settings.syncSteamPlaytimeOnStart;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.syncSteamPlaytimeOnStart=j,yield this.plugin.saveSettings()}))});let p=document.createDocumentFragment();p.createDiv({text:"when creating a game note, attempt to match with a game in your steam library (only works for owned games)"}),new Rt.Setting(t).setName("Try match Steam game on game note creation").setDesc(p).addToggle(d=>{let y=this.plugin.settings.tryFindSteamGameOnCreate;d.setValue(y).onChange(b=>q(this,null,function*(){let j=b;this.plugin.settings.tryFindSteamGameOnCreate=j,yield this.plugin.saveSettings()}))}),Bn(t,"Advanced/Dangerous");let m=document.createDocumentFragment();m.createDiv({text:"WARNING"}),m.createDiv({text:"WARNING"}),m.createDiv({text:"WARNING"}),m.createDiv({text:"WARNING"}),m.createDiv({text:"Clicking this button will force regenerate ALL METADATA in ALL files in your selected folder using your latest template file. No other content will be replaced in order to try and preserve any keepsake notes"}),m.createDiv({text:"This will work by checking metadata in the current files for either an `id/Id`, `slug/Slug`, or `name/Name` fields to query the API. As a very last fallback it will try using the filename as a query but any files that can not be requeried in all in any of these manners will be skipped for regeneration and *not* deleted"}),new Rt.Setting(t).setName("Regenerate files").setDesc(m).addButton(d=>{d.setButtonText("Regen"),d.onClick(()=>{this.plugin.regenerateAllGameNotesMetadata()})})}};function Bn(r,t){let n=document.createDocumentFragment();return n.createEl("h2",{text:t}),new Rt.Setting(r).setHeading().setName(n)}var Ln=Jt(require("obsidian")),Ur=class{constructor(t){this.key=t}getByQuery(t,n=!1){return q(this,null,function*(){try{let o=new URL("https://api.rawg.io/api/games");o.searchParams.append("key",this.key),o.searchParams.append("search",t),n&&(o.searchParams.append("store","1"),o.searchParams.append("exclude_stores","9"),o.searchParams.append("search_precise","true"));let c=(yield(0,Ln.requestUrl)({url:o.href,method:"GET"})).json;return(c==null?void 0:c.count)?c.results:[]}catch(o){throw console.warn("[Game Search][RAWG API] "+o),o}})}getBySlugOrId(t,n=!1){return q(this,null,function*(){try{let o=new URL("https://api.rawg.io/api/games/"+t);o.searchParams.append("key",this.key),n&&(o.searchParams.append("store","1"),o.searchParams.append("exclude_stores","9"),o.searchParams.append("search_precise","true"));let c=(yield(0,Ln.requestUrl)({url:o.href,method:"GET"})).json;if(c==null)throw new Error("game not found or error parsing data");return c}catch(o){throw console.warn("[Game Search][RAWG API] "+o),o}})}};var or=Jt(require("obsidian"));var ga,Ue=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ha={exports:{}},bs=Math.floor,qr=Math.max,rr=Math.min,zn=function(r,t){return t?2*r/t:1},ws=function(r,t){var n,o,i,c,l,f;for(l=[r.length,t.length],n=c=0,f=rr(o=l[0],i=l[1]);0<=f?c<f:c>f;n=0<=f?++c:--c){if(r[n]<t[n])return-1;if(r[n]>t[n])return 1}return o-i},yr=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},Ss=function(){function r(t,n,o,i){this.isjunk=t,n==null&&(n=""),o==null&&(o=""),this.autojunk=i==null||i,this.a=this.b=null,this.setSeqs(n,o)}return r.prototype.setSeqs=function(t,n){return this.setSeq1(t),this.setSeq2(n)},r.prototype.setSeq1=function(t){if(t!==this.a)return this.a=t,this.matchingBlocks=this.opcodes=null},r.prototype.setSeq2=function(t){if(t!==this.b)return this.b=t,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},r.prototype._chainB=function(){var t,n,o,i,c,l,f,u,p,m,d,y,b,j;for(t=this.b,this.b2j=n={},i=m=0,y=t.length;m<y;i=++m)o=t[i],(yr(n,o)?n[o]:n[o]=[]).push(i);if(l={},c=this.isjunk)for(d=0,b=(j=Object.keys(n)).length;d<b;d++)c(o=j[d])&&(l[o]=!0,delete n[o]);if(p={},f=t.length,this.autojunk&&f>=200)for(o in u=bs(f/100)+1,n)n[o].length>u&&(p[o]=!0,delete n[o]);return this.isbjunk=function(g){return yr(l,g)},this.isbpopular=function(g){return yr(p,g)}},r.prototype.findLongestMatch=function(t,n,o,i){var c,l,f,u,p,m,d,y,b,j,g,v,x,G,W,T,C,D,K,tt,Q;for(c=(T=[this.a,this.b,this.b2j,this.isbjunk])[0],l=T[1],f=T[2],y=T[3],u=(C=[t,o,0])[0],p=C[1],m=C[2],j={},d=x=t;t<=n?x<n:x>n;d=t<=n?++x:--x){for(v={},G=0,W=(D=yr(f,c[d])?f[c[d]]:[]).length;G<W;G++)if(!((b=D[G])<o)){if(b>=i)break;(g=v[b]=(j[b-1]||0)+1)>m&&(u=(K=[d-g+1,b-g+1,g])[0],p=K[1],m=K[2])}j=v}for(;u>t&&p>o&&!y(l[p-1])&&c[u-1]===l[p-1];)u=(tt=[u-1,p-1,m+1])[0],p=tt[1],m=tt[2];for(;u+m<n&&p+m<i&&!y(l[p+m])&&c[u+m]===l[p+m];)m++;for(;u>t&&p>o&&y(l[p-1])&&c[u-1]===l[p-1];)u=(Q=[u-1,p-1,m+1])[0],p=Q[1],m=Q[2];for(;u+m<n&&p+m<i&&y(l[p+m])&&c[u+m]===l[p+m];)m++;return[u,p,m]},r.prototype.getMatchingBlocks=function(){var t,n,o,i,c,l,f,u,p,m,d,y,b,j,g,v,x,G,W,T,C,D,K,tt,Q,ct;if(this.matchingBlocks)return this.matchingBlocks;for(G=[[0,j=(D=[this.a.length,this.b.length])[0],0,g=D[1]]],v=[];G.length;)n=(K=G.pop())[0],t=K[1],i=K[2],o=K[3],c=(tt=W=this.findLongestMatch(n,t,i,o))[0],u=tt[1],(d=tt[2])&&(v.push(W),n<c&&i<u&&G.push([n,c,i,u]),c+d<t&&u+d<o&&G.push([c+d,t,u+d,o]));for(v.sort(ws),l=p=y=0,x=[],T=0,C=v.length;T<C;T++)f=(Q=v[T])[0],m=Q[1],b=Q[2],l+y===f&&p+y===m?y+=b:(y&&x.push([l,p,y]),l=(ct=[f,m,b])[0],p=ct[1],y=ct[2]);return y&&x.push([l,p,y]),x.push([j,g,0]),this.matchingBlocks=x},r.prototype.getOpcodes=function(){var t,n,o,i,c,l,f,u,p,m,d,y;if(this.opcodes)return this.opcodes;for(i=c=0,this.opcodes=n=[],u=0,p=(m=this.getMatchingBlocks()).length;u<p;u++)t=(d=m[u])[0],o=d[1],l=d[2],f="",i<t&&c<o?f="replace":i<t?f="delete":c<o&&(f="insert"),f&&n.push([f,i,t,c,o]),i=(y=[t+l,o+l])[0],c=y[1],l&&n.push(["equal",t,i,o,c]);return n},r.prototype.getGroupedOpcodes=function(t){var n,o,i,c,l,f,u,p,m,d,y,b,j,g,v;for(t==null&&(t=3),(n=this.getOpcodes()).length||(n=[["equal",0,1,0,1]]),n[0][0]==="equal"&&(m=(b=n[0])[0],c=b[1],l=b[2],f=b[3],u=b[4],n[0]=[m,qr(c,l-t),l,qr(f,u-t),u]),n[n.length-1][0]==="equal"&&(m=(j=n[n.length-1])[0],c=j[1],l=j[2],f=j[3],u=j[4],n[n.length-1]=[m,c,rr(l,c+t),f,rr(u,f+t)]),p=t+t,i=[],o=[],d=0,y=n.length;d<y;d++)m=(g=n[d])[0],c=g[1],l=g[2],f=g[3],u=g[4],m==="equal"&&l-c>p&&(o.push([m,c,rr(l,c+t),f,rr(u,f+t)]),i.push(o),o=[],c=(v=[qr(c,l-t),qr(f,u-t)])[0],f=v[1]),o.push([m,c,l,f,u]);return!o.length||o.length===1&&o[0][0]==="equal"||i.push(o),i},r.prototype.ratio=function(){var t,n,o,i;for(t=0,n=0,o=(i=this.getMatchingBlocks()).length;n<o;n++)t+=i[n][2];return zn(t,this.a.length+this.b.length)},r.prototype.quickRatio=function(){var t,n,o,i,c,l,f,u,p,m,d;if(!this.fullbcount)for(this.fullbcount=o={},l=0,u=(m=this.b).length;l<u;l++)o[n=m[l]]=(o[n]||0)+1;for(o=this.fullbcount,t={},i=0,f=0,p=(d=this.a).length;f<p;f++)n=d[f],c=yr(t,n)?t[n]:o[n]||0,t[n]=c-1,c>0&&i++;return zn(i,this.a.length+this.b.length)},r.prototype.realQuickRatio=function(){var t,n,o;return o=[this.a.length,this.b.length],zn(rr(t=o[0],n=o[1]),t+n)},r}(),va={exports:{}};ga=va,function(){var r,t,n,o,i,c,l,f,u,p,m,d,y,b,j;n=Math.floor,p=Math.min,t=function(g,v){return g<v?-1:g>v?1:0},u=function(g,v,x,G,W){var T;if(x==null&&(x=0),W==null&&(W=t),x<0)throw new Error("lo must be non-negative");for(G==null&&(G=g.length);x<G;)W(v,g[T=n((x+G)/2)])<0?G=T:x=T+1;return[].splice.apply(g,[x,x-x].concat(v)),v},c=function(g,v,x){return x==null&&(x=t),g.push(v),b(g,0,g.length-1,x)},i=function(g,v){var x,G;return v==null&&(v=t),x=g.pop(),g.length?(G=g[0],g[0]=x,j(g,0,v)):G=x,G},f=function(g,v,x){var G;return x==null&&(x=t),G=g[0],g[0]=v,j(g,0,x),G},l=function(g,v,x){var G;return x==null&&(x=t),g.length&&x(g[0],v)<0&&(v=(G=[g[0],v])[0],g[0]=G[1],j(g,0,x)),v},o=function(g,v){var x,G,W,T,C,D;for(v==null&&(v=t),C=[],G=0,W=(T=function(){D=[];for(var K=0,tt=n(g.length/2);0<=tt?K<tt:K>tt;0<=tt?K++:K--)D.push(K);return D}.apply(this).reverse()).length;G<W;G++)x=T[G],C.push(j(g,x,v));return C},y=function(g,v,x){var G;if(x==null&&(x=t),(G=g.indexOf(v))!==-1)return b(g,0,G,x),j(g,G,x)},m=function(g,v,x){var G,W,T,C,D;if(x==null&&(x=t),!(W=g.slice(0,v)).length)return W;for(o(W,x),T=0,C=(D=g.slice(v)).length;T<C;T++)G=D[T],l(W,G,x);return W.sort(x).reverse()},d=function(g,v,x){var G,W,T,C,D,K,tt,Q,ct;if(x==null&&(x=t),10*v<=g.length){if(!(T=g.slice(0,v).sort(x)).length)return T;for(W=T[T.length-1],C=0,K=(tt=g.slice(v)).length;C<K;C++)x(G=tt[C],W)<0&&(u(T,G,0,null,x),T.pop(),W=T[T.length-1]);return T}for(o(g,x),ct=[],D=0,Q=p(v,g.length);0<=Q?D<Q:D>Q;0<=Q?++D:--D)ct.push(i(g,x));return ct},b=function(g,v,x,G){var W,T,C;for(G==null&&(G=t),W=g[x];x>v&&G(W,T=g[C=x-1>>1])<0;)g[x]=T,x=C;return g[x]=W},j=function(g,v,x){var G,W,T,C,D;for(x==null&&(x=t),W=g.length,D=v,T=g[v],G=2*v+1;G<W;)(C=G+1)<W&&!(x(g[G],g[C])<0)&&(G=C),g[v]=g[G],G=2*(v=G)+1;return g[v]=T,b(g,D,v,x)},r=function(){function g(v){this.cmp=v!=null?v:t,this.nodes=[]}return g.push=c,g.pop=i,g.replace=f,g.pushpop=l,g.heapify=o,g.updateItem=y,g.nlargest=m,g.nsmallest=d,g.prototype.push=function(v){return c(this.nodes,v,this.cmp)},g.prototype.pop=function(){return i(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(v){return this.nodes.indexOf(v)!==-1},g.prototype.replace=function(v){return f(this.nodes,v,this.cmp)},g.prototype.pushpop=function(v){return l(this.nodes,v,this.cmp)},g.prototype.heapify=function(){return o(this.nodes,this.cmp)},g.prototype.updateItem=function(v){return y(this.nodes,v,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var v;return(v=new g).nodes=this.nodes.slice(0),v},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),ga.exports=r}.call(Ue);var Vn,$n,Un,xs=va.exports,qt={exports:{}};(function(r,t){(function(){function n(e,a,s){switch(s.length){case 0:return e.call(a);case 1:return e.call(a,s[0]);case 2:return e.call(a,s[0],s[1]);case 3:return e.call(a,s[0],s[1],s[2])}return e.apply(a,s)}function o(e,a){for(var s=-1,h=e==null?0:e.length;++s<h&&a(e[s],s,e)!==!1;);return e}function i(e,a){var s;if(s=!(e==null||!e.length)){if(a==a)t:{s=-1;for(var h=e.length;++s<h;)if(e[s]===a)break t;s=-1}else t:{s=p,h=e.length;for(var w=-1;++w<h;)if(s(e[w],w,e)){s=w;break t}s=-1}s=-1<s}return s}function c(e,a,s){for(var h=-1,w=e==null?0:e.length;++h<w;)if(s(a,e[h]))return!0;return!1}function l(e,a){for(var s=-1,h=e==null?0:e.length,w=Array(h);++s<h;)w[s]=a(e[s],s,e);return w}function f(e,a){for(var s=-1,h=a.length,w=e.length;++s<h;)e[w+s]=a[s];return e}function u(e,a){for(var s=-1,h=e==null?0:e.length;++s<h;)if(a(e[s],s,e))return!0;return!1}function p(e){return e!=e}function m(e){return function(a){return e(a)}}function d(e,a){return e.has(a)}function y(e){var a=-1,s=Array(e.size);return e.forEach(function(h,w){s[++a]=[w,h]}),s}function b(e){var a=Object;return function(s){return e(a(s))}}function j(e,a){for(var s=-1,h=e.length,w=0,A=[];++s<h;){var P=e[s];P!==a&&P!=="__lodash_placeholder__"||(e[s]="__lodash_placeholder__",A[w++]=s)}return A}function g(e){var a=-1,s=Array(e.size);return e.forEach(function(h){s[++a]=h}),s}function v(){}function x(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function G(e){var a=-1,s=e==null?0:e.length;for(this.clear();++a<s;){var h=e[a];this.set(h[0],h[1])}}function W(e){var a=-1,s=e==null?0:e.length;for(this.clear();++a<s;){var h=e[a];this.set(h[0],h[1])}}function T(e){var a=-1,s=e==null?0:e.length;for(this.clear();++a<s;){var h=e[a];this.set(h[0],h[1])}}function C(e){var a=-1,s=e==null?0:e.length;for(this.__data__=new T;++a<s;)this.add(e[a])}function D(e){this.size=(this.__data__=new W(e)).size}function K(e,a){var s=Bt(e),h=!s&&Fr(e),w=!s&&!h&&fr(e),A=!s&&!h&&!w&&pn(e);if(s=s||h||w||A){h=e.length;for(var P=String,O=-1,I=Array(h);++O<h;)I[O]=P(O);h=I}else h=[];var M;P=h.length;for(M in e)!a&&!zt.call(e,M)||s&&(M=="length"||w&&(M=="offset"||M=="parent")||A&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||J(M,P))||h.push(M);return h}function tt(e,a,s){var h=e[a];zt.call(e,a)&&_t(h,s)&&(s!==z||a in e)||ct(e,a,s)}function Q(e,a){for(var s=e.length;s--;)if(_t(e[s][0],a))return s;return-1}function ct(e,a,s){a=="__proto__"&&kr?kr(e,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[a]=s}function dt(e,a,s,h,w,A){var P,O=1&a,I=2&a,M=4&a;if(s&&(P=w?s(e,h,w,A):s(e)),P!==z)return P;if(!le(e))return e;if(h=Bt(e)){if(P=function(L){var ot=L.length,vt=new L.constructor(ot);return ot&&typeof L[0]=="string"&&zt.call(L,"index")&&(vt.index=L.index,vt.input=L.input),vt}(e),!O)return _e(e,P)}else{var N=te(e),$=N=="[object Function]"||N=="[object GeneratorFunction]";if(fr(e))return function(L,ot){if(ot)return L.slice();var vt=L.length;return vt=wo?wo(vt):new L.constructor(vt),L.copy(vt),vt}(e,O);if(N=="[object Object]"||N=="[object Arguments]"||$&&!w){if(P=I||$||typeof e.constructor!="function"||bt(e)?{}:un(So(e)),!O)return I?function(L,ot){return he(L,ko(L),ot)}(e,function(L,ot){return L&&he(ot,jr(ot),L)}(P,e)):function(L,ot){return he(L,fn(L),ot)}(e,function(L,ot){return L&&he(ot,Fe(ot),L)}(P,e))}else{if(!ft[N])return w?e:{};P=function(L,ot,vt){var Gt=L.constructor;switch(ot){case"[object ArrayBuffer]":return se(L);case"[object Boolean]":case"[object Date]":return new Gt(+L);case"[object DataView]":return ot=vt?se(L.buffer):L.buffer,new L.constructor(ot,L.byteOffset,L.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ot=vt?se(L.buffer):L.buffer,new L.constructor(ot,L.byteOffset,L.length);case"[object Map]":return new Gt;case"[object Number]":case"[object String]":return new Gt(L);case"[object RegExp]":return(ot=new L.constructor(L.source,Ha.exec(L))).lastIndex=L.lastIndex,ot;case"[object Set]":return new Gt;case"[object Symbol]":return ur?Object(ur.call(L)):{}}}(e,N,O)}}if(A||(A=new D),w=A.get(e))return w;if(A.set(e,P),Co(e))return e.forEach(function(U){P.add(dt(U,a,s,U,e,A))}),P;if(Fo(e))return e.forEach(function(U,L){P.set(L,dt(U,a,s,L,e,A))}),P;I=M?I?at:et:I?jr:Fe;var nt=h?z:I(e);return o(nt||e,function(U,L){nt&&(U=e[L=U]),tt(P,L,dt(U,a,s,L,e,A))}),P}function Tt(e,a,s,h){var w=-1,A=i,P=!0,O=e.length,I=[],M=a.length;if(!O)return I;s&&(a=l(a,m(s))),h?(A=c,P=!1):200<=a.length&&(A=d,P=!1,a=new C(a));t:for(;++w<O;){var N=e[w],$=s==null?N:s(N);if(N=h||N!==0?N:0,P&&$==$){for(var nt=M;nt--;)if(a[nt]===$)continue t;I.push(N)}else A(a,$,h)||I.push(N)}return I}function yt(e,a,s,h,w){var A=-1,P=e.length;for(s||(s=st),w||(w=[]);++A<P;){var O=e[A];0<a&&s(O)?1<a?yt(O,a-1,s,h,w):f(w,O):h||(w[w.length]=O)}return w}function Ht(e,a){for(var s=0,h=(a=ie(a,e)).length;e!=null&&s<h;)e=e[ve(a[s++])];return s&&s==h?e:z}function Yt(e,a,s){return a=a(e),Bt(e)?a:f(a,s(e))}function mt(e){if(e==null)e=e===z?"[object Undefined]":"[object Null]";else if(Ce&&Ce in Object(e)){var a=zt.call(e,Ce),s=e[Ce];try{e[Ce]=z;var h=!0}catch(A){}var w=bo.call(e);h&&(a?e[Ce]=s:delete e[Ce]),e=w}else e=bo.call(e);return e}function Ft(e,a,s){for(var h=s?c:i,w=e[0].length,A=e.length,P=A,O=Array(A),I=1/0,M=[];P--;){var N=e[P];P&&a&&(N=l(N,m(a))),I=sn(N.length,I),O[P]=!s&&(a||120<=w&&120<=N.length)?new C(P&&N):z}N=e[0];var $=-1,nt=O[0];t:for(;++$<w&&M.length<I;){var U=N[$],L=a?a(U):U;if(U=s||U!==0?U:0,nt?!d(nt,L):!h(M,L,s)){for(P=A;--P;){var ot=O[P];if(ot?!d(ot,L):!h(e[P],L,s))continue t}nt&&nt.push(L),M.push(U)}}return M}function de(e){return ue(e)&&mt(e)=="[object Arguments]"}function Ct(e,a,s,h,w){if(e===a)a=!0;else if(e==null||a==null||!ue(e)&&!ue(a))a=e!=e&&a!=a;else t:{var A,P,O=Bt(e),I=Bt(a),M=(A=(A=O?"[object Array]":te(e))=="[object Arguments]"?"[object Object]":A)=="[object Object]";if(I=(P=(P=I?"[object Array]":te(a))=="[object Arguments]"?"[object Object]":P)=="[object Object]",(P=A==P)&&fr(e)){if(!fr(a)){a=!1;break t}O=!0,M=!1}if(P&&!M)w||(w=new D),a=O||pn(e)?X(e,a,s,h,Ct,w):F(e,a,A,s,h,Ct,w);else{if(!(1&s)&&(O=M&&zt.call(e,"__wrapped__"),A=I&&zt.call(a,"__wrapped__"),O||A)){e=O?e.value():e,a=A?a.value():a,w||(w=new D),a=Ct(e,a,s,h,w);break t}if(P)e:if(w||(w=new D),O=1&s,A=et(e),I=A.length,P=et(a).length,I==P||O){for(M=I;M--;){var N=A[M];if(!(O?N in a:zt.call(a,N))){a=!1;break e}}if((P=w.get(e))&&w.get(a))a=P==a;else{P=!0,w.set(e,a),w.set(a,e);for(var $=O;++M<I;){var nt=e[N=A[M]],U=a[N];if(h)var L=O?h(U,nt,N,a,e,w):h(nt,U,N,e,a,w);if(L===z?nt!==U&&!Ct(nt,U,s,h,w):!L){P=!1;break}$||($=N=="constructor")}P&&!$&&(s=e.constructor)!=(h=a.constructor)&&"constructor"in e&&"constructor"in a&&!(typeof s=="function"&&s instanceof s&&typeof h=="function"&&h instanceof h)&&(P=!1),w.delete(e),w.delete(a),a=P}}else a=!1;else a=!1}}return a}function ge(e){return typeof e=="function"?e:e==null?He:typeof e=="object"?Bt(e)?function(s,h){return ut(s)&&h==h&&!le(h)?lt(ve(s),h):function(w){var A=oo(w,s);return A===z&&A===h?ao(w,s):Ct(h,A,3)}}(e[0],e[1]):function(s){var h=function(A){for(var P=Fe(A),O=P.length;O--;){var I=P[O],M=A[I];P[O]=[I,M,M==M&&!le(M)]}return P}(s);return h.length==1&&h[0][2]?lt(h[0][0],h[0][1]):function(w){return w===s||function(P,O){var I=O.length,M=I;if(P==null)return!M;for(P=Object(P);I--;)if((N=O[I])[2]?N[1]!==P[N[0]]:!(N[0]in P))return!1;for(;++I<M;){var N,$=(N=O[I])[0],nt=P[$],U=N[1];if(N[2]){if(nt===z&&!($ in P))return!1}else if(!Ct(U,nt,3,void 0,N=new D))return!1}return!0}(w,h)}}(e):co(e)}function xe(e,a,s){var h=-1;return a=l(a.length?a:[He],m(V())),function(A,P){var O=A.length;for(A.sort(P);O--;)A[O]=A[O].c;return A}(e=function(A,P){var O=-1,I=ke(A)?Array(A.length):[];return Po(A,function(M,N,$){I[++O]=P(M,N,$)}),I}(e,function(w){return{a:l(a,function(A){return A(w)}),b:++h,c:w}}),function(w,A){var P;t:{P=-1;for(var O=w.a,I=A.a,M=O.length,N=s.length;++P<M;){var $;e:{$=O[P];var nt=I[P];if($!==nt){var U=$!==z,L=$===null,ot=$==$,vt=Te($),Gt=nt!==z,wt=nt===null,Wt=nt==nt,Kt=Te(nt);if(!wt&&!Kt&&!vt&&$>nt||vt&&Gt&&Wt&&!wt&&!Kt||L&&Gt&&Wt||!U&&Wt||!ot){$=1;break e}if(!L&&!vt&&!Kt&&$<nt||Kt&&U&&ot&&!L&&!vt||wt&&U&&ot||!Gt&&ot||!Wt){$=-1;break e}}$=0}if($){P=P>=N?$:$*(s[P]=="desc"?-1:1);break t}}P=w.b-A.b}return P})}function $t(e){return To(Z(e,He),e+"")}function ae(e){if(typeof e=="string")return e;if(Bt(e))return l(e,ae)+"";if(Te(e))return Go?Go.call(e):"";var a=e+"";return a=="0"&&1/e==-ir?"-0":a}function Zt(e,a,s){var h=-1,w=i,A=e.length,P=!0,O=[],I=O;if(s)P=!1,w=c;else if(200<=A){if(w=a?null:hi(e))return g(w);P=!1,w=d,I=new C}else I=a?[]:O;t:for(;++h<A;){var M=e[h],N=a?a(M):M;if(M=s||M!==0?M:0,P&&N==N){for(var $=I.length;$--;)if(I[$]===N)continue t;a&&I.push(N),O.push(M)}else w(I,N,s)||(I!==O&&I.push(N),O.push(M))}return O}function Lt(e){return Re(e)?e:[]}function ie(e,a){return Bt(e)?e:ut(e,a)?[e]:vi(no(e))}function se(e){var a=new e.constructor(e.byteLength);return new Er(a).set(new Er(e)),a}function It(e,a,s,h){var w=-1,A=e.length,P=s.length,O=-1,I=a.length,M=Ye(A-P,0),N=Array(I+M);for(h=!h;++O<I;)N[O]=a[O];for(;++w<P;)(h||w<A)&&(N[s[w]]=e[w]);for(;M--;)N[O++]=e[w++];return N}function Qt(e,a,s,h){var w=-1,A=e.length,P=-1,O=s.length,I=-1,M=a.length,N=Ye(A-O,0),$=Array(N+M);for(h=!h;++w<N;)$[w]=e[w];for(N=w;++I<M;)$[N+I]=a[I];for(;++P<O;)(h||w<A)&&($[N+s[P]]=e[w++]);return $}function _e(e,a){var s=-1,h=e.length;for(a||(a=Array(h));++s<h;)a[s]=e[s];return a}function he(e,a,s){var h=!s;s||(s={});for(var w=-1,A=a.length;++w<A;){var P=a[w],O=z;O===z&&(O=e[P]),h?ct(s,P,O):tt(s,P,O)}return s}function k(e){return function(){switch((a=arguments).length){case 0:return new e;case 1:return new e(a[0]);case 2:return new e(a[0],a[1]);case 3:return new e(a[0],a[1],a[2]);case 4:return new e(a[0],a[1],a[2],a[3]);case 5:return new e(a[0],a[1],a[2],a[3],a[4]);case 6:return new e(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new e(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var a,s=un(e.prototype);return le(a=e.apply(s,a))?a:s}}function _(e,a,s){var h=k(e);return function w(){for(var A=arguments.length,P=Array(A),O=A,I=Y(w);O--;)P[O]=arguments[O];return(A-=(O=3>A&&P[0]!==I&&P[A-1]!==I?[]:j(P,I)).length)<s?S(e,a,E,w.placeholder,z,P,O,z,z,s-A):n(this&&this!==Ut&&this instanceof w?h:e,this,P)}}function E(e,a,s,h,w,A,P,O,I,M){var N=128&a,$=1&a,nt=2&a,U=24&a,L=512&a,ot=nt?z:k(e);return function vt(){for(var Gt=arguments.length,wt=Array(Gt),Wt=Gt;Wt--;)wt[Wt]=arguments[Wt];if(U){var Kt,Ie=Y(vt);for(Wt=wt.length,Kt=0;Wt--;)wt[Wt]===Ie&&++Kt}if(h&&(wt=It(wt,h,w,U)),A&&(wt=Qt(wt,A,P,U)),Gt-=Kt,U&&Gt<M)return Ie=j(wt,Ie),S(e,a,E,vt.placeholder,s,wt,Ie,O,I,M-Gt);if(Ie=$?s:this,Wt=nt?Ie[e]:e,Gt=wt.length,O){Kt=wt.length;for(var dn=sn(O.length,Kt),xi=_e(wt);dn--;){var Io=O[dn];wt[dn]=J(Io,Kt)?xi[Io]:z}}else L&&1<Gt&&wt.reverse();return N&&I<Gt&&(wt.length=I),this&&this!==Ut&&this instanceof vt&&(Wt=ot||k(Wt)),Wt.apply(Ie,wt)}}function R(e,a,s,h){var w=1&a,A=k(e);return function P(){for(var O=-1,I=arguments.length,M=-1,N=h.length,$=Array(N+I),nt=this&&this!==Ut&&this instanceof P?A:e;++M<N;)$[M]=h[M];for(;I--;)$[M++]=arguments[++O];return n(nt,w?s:this,$)}}function S(e,a,s,h,w,A,P,O,I,M){var N=8&a,$=N?P:z;4&(a=(a|(N?32:64))&~(N?64:32))||(a&=-4),w=[e,a,w,N?A:z,$,A=N?z:A,P=N?z:P,O,I,M],s=s.apply(z,w);t:for(O=e.name+"",I=jo[O],M=zt.call(jo,O)?I.length:0;M--;)if(N=I[M],$=N.func,$==null||$==e){O=N.name;break t}return typeof(I=v[O])=="function"&&O in x.prototype?e===I?O=!0:O=!!(O=Eo(I))&&e===O[0]:O=!1,O&&Ro(s,w),s.placeholder=h,gt(s,e,a)}function X(e,a,s,h,w,A){var P=1&s,O=e.length;if(O!=(I=a.length)&&!(P&&I>O))return!1;if((I=A.get(e))&&A.get(a))return I==a;var I=-1,M=!0,N=2&s?new C:z;for(A.set(e,a),A.set(a,e);++I<O;){var $=e[I],nt=a[I];if(h)var U=P?h(nt,$,I,a,e,A):h($,nt,I,e,a,A);if(U!==z){if(U)continue;M=!1;break}if(N){if(!u(a,function(L,ot){if(!d(N,ot)&&($===L||w($,L,s,h,A)))return N.push(ot)})){M=!1;break}}else if($!==nt&&!w($,nt,s,h,A)){M=!1;break}}return A.delete(e),A.delete(a),M}function F(e,a,s,h,w,A,P){switch(s){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)break;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":if(e.byteLength!=a.byteLength||!A(new Er(e),new Er(a)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return _t(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var O=y;case"[object Set]":if(O||(O=g),e.size!=a.size&&!(1&h))break;return(s=P.get(e))?s==a:(h|=2,P.set(e,a),a=X(O(e),O(a),h,w,A,P),P.delete(e),a);case"[object Symbol]":if(ur)return ur.call(e)==ur.call(a)}return!1}function et(e){return Yt(e,Fe,fn)}function at(e){return Yt(e,jr,ko)}function Y(e){return(zt.call(v,"placeholder")?v:e).placeholder}function V(){var e=(e=v.iteratee||Zr)===Zr?ge:e;return arguments.length?e(arguments[0],arguments[1]):e}function B(e,a){var s=e.__data__,h=typeof a;return(h=="string"||h=="number"||h=="symbol"||h=="boolean"?a!=="__proto__":a===null)?s[typeof a=="string"?"string":"hash"]:s.map}function H(e,a){var s=e==null?z:e[a];return!le(s)||yo&&yo in s||!(Kr(s)?oi:Ka).test(ce(s))?z:s}function st(e){return Bt(e)||Fr(e)||!!(Ao&&e&&e[Ao])}function J(e,a){var s=typeof e;return!!(a=a==null?9007199254740991:a)&&(s=="number"||s!="symbol"&&Za.test(e))&&-1<e&&e%1==0&&e<a}function ut(e,a){if(Bt(e))return!1;var s=typeof e;return!(s!="number"&&s!="symbol"&&s!="boolean"&&e!=null&&!Te(e))||Ba.test(e)||!Da.test(e)||a!=null&&e in Object(a)}function bt(e){var a=e&&e.constructor;return e===(typeof a=="function"&&a.prototype||Pr)}function lt(e,a){return function(s){return s!=null&&s[e]===a&&(a!==z||e in Object(s))}}function Z(e,a){var s=Ye((s=void 0)===z?e.length-1:s,0);return function(){for(var h=arguments,w=-1,A=Ye(h.length-s,0),P=Array(A);++w<A;)P[w]=h[s+w];for(w=-1,A=Array(s+1);++w<s;)A[w]=h[w];return A[s]=a(P),n(e,this,A)}}function gt(e,a,s){var h=a+"";a=To;var w,A=qe;return s=A(w=(w=h.match($a))?w[1].split(Ua):[],s),(A=s.length)&&(s[w=A-1]=(1<A?"& ":"")+s[w],s=s.join(2<A?", ":" "),h=h.replace(Va,`{
/* [wrapped with `+s+`] */
`)),a(e,h)}function Xt(e){var a=0,s=0;return function(){var h=ci(),w=16-(h-s);if(s=h,0<w){if(800<=++a)return arguments[0]}else a=0;return e.apply(z,arguments)}}function ve(e){if(typeof e=="string"||Te(e))return e;var a=e+"";return a=="0"&&1/e==-ir?"-0":a}function ce(e){if(e!=null){try{return vo.call(e)}catch(a){}return e+""}return""}function qe(e,a){return o(Na,function(s){var h="_."+s[0];a&s[1]&&!i(e,h)&&e.push(h)}),e.sort()}function Ae(e){var a=e==null?0:e.length;return a?e[a-1]:z}function ye(e,a){return(Bt(e)?o:Po)(e,V(a,3))}function it(e,a){function s(){var h=arguments,w=a?a.apply(this,h):h[0],A=s.cache;return A.has(w)?A.get(w):(h=e.apply(this,h),s.cache=A.set(w,h)||A,h)}if(typeof e!="function"||a!=null&&typeof a!="function")throw new TypeError("Expected a function");return s.cache=new(it.Cache||T),s}function _t(e,a){return e===a||e!=e&&a!=a}function ke(e){return e!=null&&Ar(e.length)&&!Kr(e)}function Re(e){return ue(e)&&ke(e)}function Kr(e){return!!le(e)&&((e=mt(e))=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]")}function Ar(e){return typeof e=="number"&&-1<e&&e%1==0&&9007199254740991>=e}function le(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}function ue(e){return e!=null&&typeof e=="object"}function to(e){return typeof e=="string"||!Bt(e)&&ue(e)&&mt(e)=="[object String]"}function Te(e){return typeof e=="symbol"||ue(e)&&mt(e)=="[object Symbol]"}function eo(e){return e?(e=ro(e))===ir||e===-ir?17976931348623157e292*(0>e?-1:1):e==e?e:0:e===0?e:0}function Jr(e){var a=(e=eo(e))%1;return e==e?a?e-a:e:0}function ro(e){if(typeof e=="number")return e;if(Te(e))return uo;if(le(e)&&(e=le(e=typeof e.valueOf=="function"?e.valueOf():e)?e+"":e),typeof e!="string")return e===0?e:+e;e=e.replace(za,"");var a=Xa.test(e);return a||Ja.test(e)?ei(e.slice(2),a?2:8):Ya.test(e)?uo:+e}function no(e){return e==null?"":ae(e)}function oo(e,a,s){return(e=e==null?z:Ht(e,a))===z?s:e}function ao(e,a){var s;if(s=e!=null){for(var h,w=-1,A=(h=ie(a,s=e)).length,P=!1;++w<A;){var O=ve(h[w]);if(!(P=s!=null&&s!=null&&O in Object(s)))break;s=s[O]}P||++w!=A?s=P:s=!!(A=s==null?0:s.length)&&Ar(A)&&J(O,A)&&(Bt(s)||Fr(s))}return s}function Fe(e){if(ke(e))e=K(e);else if(bt(e)){var a,s=[];for(a in Object(e))zt.call(e,a)&&a!="constructor"&&s.push(a);e=s}else e=si(e);return e}function jr(e){if(ke(e))e=K(e,!0);else if(le(e)){var a,s=bt(e),h=[];for(a in e)(a!="constructor"||!s&&zt.call(e,a))&&h.push(a);e=h}else{if(a=[],e!=null)for(s in Object(e))a.push(s);e=a}return e}function io(e){return e==null?[]:function(s,h){return l(h,function(w){return s[w]})}(e,Fe(e))}function so(e){return function(){return e}}function He(e){return e}function Zr(e){return ge(typeof e=="function"?e:dt(e,1))}function Qr(){}function co(e){return ut(e)?function(s){return function(h){return h==null?z:h[s]}}(ve(e)):function(s){return function(h){return Ht(h,s)}}(e)}function tn(){return[]}function lo(){return!1}var z,ir=1/0,uo=NaN,Na=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Da=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ba=/^\w*$/,La=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,za=/^\s+|\s+$/g,Va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$a=/\{\n\/\* \[wrapped with (.+)\] \*/,Ua=/,? & /,qa=/\\(\\)?/g,Ha=/\w*$/,Ya=/^[-+]0x[0-9a-f]+$/i,Xa=/^0b[01]+$/i,Ka=/^\[object .+?Constructor\]$/,Ja=/^0o[0-7]+$/i,Za=/^(?:0|[1-9]\d*)$/,Qa=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*","g"),ti=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pt={};pt["[object Float32Array]"]=pt["[object Float64Array]"]=pt["[object Int8Array]"]=pt["[object Int16Array]"]=pt["[object Int32Array]"]=pt["[object Uint8Array]"]=pt["[object Uint8ClampedArray]"]=pt["[object Uint16Array]"]=pt["[object Uint32Array]"]=!0,pt["[object Arguments]"]=pt["[object Array]"]=pt["[object ArrayBuffer]"]=pt["[object Boolean]"]=pt["[object DataView]"]=pt["[object Date]"]=pt["[object Error]"]=pt["[object Function]"]=pt["[object Map]"]=pt["[object Number]"]=pt["[object Object]"]=pt["[object RegExp]"]=pt["[object Set]"]=pt["[object String]"]=pt["[object WeakMap]"]=!1;var ft={};ft["[object Arguments]"]=ft["[object Array]"]=ft["[object ArrayBuffer]"]=ft["[object DataView]"]=ft["[object Boolean]"]=ft["[object Date]"]=ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Map]"]=ft["[object Number]"]=ft["[object Object]"]=ft["[object RegExp]"]=ft["[object Set]"]=ft["[object String]"]=ft["[object Symbol]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft["[object Error]"]=ft["[object Function]"]=ft["[object WeakMap]"]=!1;var je,ei=parseInt,fo=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,ri=typeof self=="object"&&self&&self.Object===Object&&self,Ut=fo||ri||Function("return this")(),en=t&&!t.nodeType&&t,Gr=en&&r&&!r.nodeType&&r,mo=Gr&&Gr.exports===en,rn=mo&&fo.process;t:{try{je=rn&&rn.binding&&rn.binding("util");break t}catch(e){}je=void 0}var po=je&&je.isMap,go=je&&je.isSet,ho=je&&je.isTypedArray,ni=Array.prototype,Pr=Object.prototype,nn=Ut["__core-js_shared__"],vo=Function.prototype.toString,zt=Pr.hasOwnProperty,yo=function(){var e=/[^.]+$/.exec(nn&&nn.keys&&nn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bo=Pr.toString,oi=RegExp("^"+vo.call(zt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Or=mo?Ut.Buffer:z,Ge=Ut.Symbol,Er=Ut.Uint8Array,wo=Or?Or.f:z,So=b(Object.getPrototypeOf),xo=Object.create,_o=Pr.propertyIsEnumerable,ai=ni.splice,Ao=Ge?Ge.isConcatSpreadable:z,on=Ge?Ge.iterator:z,Ce=Ge?Ge.toStringTag:z,kr=function(){try{var e=H(Object,"defineProperty");return e({},"",{}),e}catch(a){}}(),an=Object.getOwnPropertySymbols,ii=Or?Or.isBuffer:z,si=b(Object.keys),Ye=Math.max,sn=Math.min,ci=Date.now,cn=H(Ut,"DataView"),sr=H(Ut,"Map"),ln=H(Ut,"Promise"),Xe=H(Ut,"Set"),cr=H(Ut,"WeakMap"),lr=H(Object,"create"),Rr=cr&&new cr,jo={},li=ce(cn),ui=ce(sr),fi=ce(ln),mi=ce(Xe),pi=ce(cr),Tr=Ge?Ge.prototype:z,ur=Tr?Tr.valueOf:z,Go=Tr?Tr.toString:z,un=function(){function e(){}return function(a){return le(a)?xo?xo(a):(e.prototype=a,a=new e,e.prototype=z,a):{}}}();x.prototype=un(function(){}.prototype),x.prototype.constructor=x,G.prototype.clear=function(){this.__data__=lr?lr(null):{},this.size=0},G.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},G.prototype.get=function(e){var a=this.__data__;return lr?(e=a[e])==="__lodash_hash_undefined__"?z:e:zt.call(a,e)?a[e]:z},G.prototype.has=function(e){var a=this.__data__;return lr?a[e]!==z:zt.call(a,e)},G.prototype.set=function(e,a){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=lr&&a===z?"__lodash_hash_undefined__":a,this},W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(e){var a=this.__data__;return!(0>(e=Q(a,e))||(e==a.length-1?a.pop():ai.call(a,e,1),--this.size,0))},W.prototype.get=function(e){var a=this.__data__;return 0>(e=Q(a,e))?z:a[e][1]},W.prototype.has=function(e){return-1<Q(this.__data__,e)},W.prototype.set=function(e,a){var s=this.__data__,h=Q(s,e);return 0>h?(++this.size,s.push([e,a])):s[h][1]=a,this},T.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(sr||W),string:new G}},T.prototype.delete=function(e){return e=B(this,e).delete(e),this.size-=e?1:0,e},T.prototype.get=function(e){return B(this,e).get(e)},T.prototype.has=function(e){return B(this,e).has(e)},T.prototype.set=function(e,a){var s=B(this,e),h=s.size;return s.set(e,a),this.size+=s.size==h?0:1,this},C.prototype.add=C.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},C.prototype.has=function(e){return this.__data__.has(e)},D.prototype.clear=function(){this.__data__=new W,this.size=0},D.prototype.delete=function(e){var a=this.__data__;return e=a.delete(e),this.size=a.size,e},D.prototype.get=function(e){return this.__data__.get(e)},D.prototype.has=function(e){return this.__data__.has(e)},D.prototype.set=function(e,a){var s=this.__data__;if(s instanceof W){var h=s.__data__;if(!sr||199>h.length)return h.push([e,a]),this.size=++s.size,this;s=this.__data__=new T(h)}return s.set(e,a),this.size=s.size,this};var Po=function(e,a){if(e==null)return e;if(!ke(e))return function(A,P){return A&&di(A,P,Fe)}(e,a);for(var s=e.length,h=-1,w=Object(e);++h<s&&a(w[h],h,w)!==!1;);return e},di=function(e,a,s){for(var h=-1,w=Object(e),A=(s=s(e)).length;A--;){var P=s[++h];if(a(w[P],P,w)===!1)break}return e},Oo=Rr?function(e,a){return Rr.set(e,a),e}:He,gi=kr?function(e,a){return kr(e,"toString",{configurable:!0,enumerable:!1,value:so(a),writable:!0})}:He,hi=Xe&&1/g(new Xe([,-0]))[1]==ir?function(e){return new Xe(e)}:Qr,Eo=Rr?function(e){return Rr.get(e)}:Qr,fn=an?function(e){return e==null?[]:(e=Object(e),function(s,h){for(var w=-1,A=s==null?0:s.length,P=0,O=[];++w<A;){var I=s[w];h(I,w,s)&&(O[P++]=I)}return O}(an(e),function(a){return _o.call(e,a)}))}:tn,ko=an?function(e){for(var a=[];e;)f(a,fn(e)),e=So(e);return a}:tn,te=mt;(cn&&te(new cn(new ArrayBuffer(1)))!="[object DataView]"||sr&&te(new sr)!="[object Map]"||ln&&te(ln.resolve())!="[object Promise]"||Xe&&te(new Xe)!="[object Set]"||cr&&te(new cr)!="[object WeakMap]")&&(te=function(e){var a=mt(e);if(e=(e=a=="[object Object]"?e.constructor:z)?ce(e):"")switch(e){case li:return"[object DataView]";case ui:return"[object Map]";case fi:return"[object Promise]";case mi:return"[object Set]";case pi:return"[object WeakMap]"}return a});var Ro=Xt(Oo),To=Xt(gi),vi=function(e){var a=(e=it(e,function(s){return a.size===500&&a.clear(),s})).cache;return e}(function(e){var a=[];return e.charCodeAt(0)===46&&a.push(""),e.replace(La,function(s,h,w,A){a.push(w?A.replace(qa,"$1"):h||s)}),a}),yi=$t(function(e,a){return Re(e)?Tt(e,yt(a,1,Re,!0)):[]}),bi=$t(function(e,a){var s=Ae(a);return Re(s)&&(s=z),Re(e)?Tt(e,yt(a,1,Re,!0),z,s):[]}),wi=$t(function(e){var a=l(e,Lt);return a.length&&a[0]===e[0]?Ft(a):[]}),Si=$t(function(e){var a=Ae(e),s=l(e,Lt);return(a=typeof a=="function"?a:z)&&s.pop(),s.length&&s[0]===e[0]?Ft(s,z,a):[]});it.Cache=T;var mn=$t(function(e,a){var s,h,w=j(a,Y(mn)),A=e,P=z,O=a,I=w,M=64;if(!(w=2&M)&&typeof A!="function")throw new TypeError("Expected a function");var N=O?O.length:0;if(N||(M&=-97,O=I=z),s=s===z?s:Ye(Jr(s),0),h=h===z?h:Jr(h),N-=I?I.length:0,64&M){var $=O,nt=I;O=I=z}var U=w?z:Eo(A);return s=[A,M,P,O,I,$,nt,void 0,s,h],U&&(P=(O=s[1])|(A=U[1]),h=A==128&&O==8||A==128&&O==256&&s[7].length<=U[8]||A==384&&U[7].length<=U[8]&&O==8,131>P||h)&&(1&A&&(s[2]=U[2],P|=1&O?0:4),(O=U[3])&&(h=s[3],s[3]=h?It(h,O,U[4]):O,s[4]=h?j(s[3],"__lodash_placeholder__"):U[4]),(O=U[5])&&(h=s[5],s[5]=h?Qt(h,O,U[6]):O,s[6]=h?j(s[5],"__lodash_placeholder__"):U[6]),(O=U[7])&&(s[7]=O),128&A&&(s[8]=s[8]==null?U[8]:sn(s[8],U[8])),s[9]==null&&(s[9]=U[9]),s[0]=U[0],s[1]=P),A=s[0],M=s[1],P=s[2],O=s[3],I=s[4],!(h=s[9]=s[9]===z?w?0:A.length:Ye(s[9]-N,0))&&24&M&&(M&=-25),gt((U?Oo:Ro)(M&&M!=1?M==8||M==16?_(A,M,h):M!=32&&M!=33||I.length?E.apply(z,s):R(A,M,P,O):function(ot,vt,Gt){var wt=1&vt,Wt=k(ot);return function Kt(){return(this&&this!==Ut&&this instanceof Kt?Wt:ot).apply(wt?Gt:this,arguments)}}(A,M,P),s),A,M)}),Fr=de(function(){return arguments}())?de:function(e){return ue(e)&&zt.call(e,"callee")&&!_o.call(e,"callee")},Bt=Array.isArray,fr=ii||lo,Fo=po?m(po):function(a){return ue(a)&&te(a)=="[object Map]"},Co=go?m(go):function(a){return ue(a)&&te(a)=="[object Set]"},pn=ho?m(ho):function(a){return ue(a)&&Ar(a.length)&&!!pt[mt(a)]};v.constant=so,v.difference=yi,v.differenceWith=bi,v.intersection=wi,v.intersectionWith=Si,v.iteratee=Zr,v.keys=Fe,v.keysIn=jr,v.memoize=it,v.orderBy=function(e,a,s,h){return e==null?[]:(Bt(a)||(a=a==null?[]:[a]),Bt(s=h?z:s)||(s=s==null?[]:[s]),xe(e,a,s))},v.partialRight=mn,v.property=co,v.toArray=function(e){if(!e)return[];if(ke(e))return to(e)?ti.test(e)?e.match(Qa)||[]:e.split(""):_e(e);if(on&&e[on]){e=e[on]();for(var a,s=[];!(a=e.next()).done;)s.push(a.value);return s}return((a=te(e))=="[object Map]"?y:a=="[object Set]"?g:io)(e)},v.uniq=function(e){return e&&e.length?Zt(e):[]},v.uniqWith=function(e,a){return a=typeof a=="function"?a:z,e&&e.length?Zt(e,z,a):[]},v.values=io,v.eq=_t,v.forEach=ye,v.get=oo,v.hasIn=ao,v.identity=He,v.isArguments=Fr,v.isArray=Bt,v.isArrayLike=ke,v.isArrayLikeObject=Re,v.isBuffer=fr,v.isFunction=Kr,v.isLength=Ar,v.isMap=Fo,v.isObject=le,v.isObjectLike=ue,v.isSet=Co,v.isString=to,v.isSymbol=Te,v.isTypedArray=pn,v.last=Ae,v.stubArray=tn,v.stubFalse=lo,v.noop=Qr,v.toFinite=eo,v.toInteger=Jr,v.toNumber=ro,v.toString=no,v.each=ye,v.VERSION="4.17.5",mn.placeholder=v,Gr?((Gr.exports=v)._=v,en._=v):Ut._=v}).call(Ue)})(qt,qt.exports),String.prototype.codePointAt||(Vn=function(){try{var r={},t=Object.defineProperty,n=t(r,r,r)&&t}catch(o){}return n}(),$n=function(r){if(this==null)throw TypeError();var t=String(this),n=t.length,o=r?Number(r):0;if(o!=o&&(o=0),!(o<0||o>=n)){var i,c=t.charCodeAt(o);return c>=55296&&c<=56319&&n>o+1&&(i=t.charCodeAt(o+1))>=56320&&i<=57343?1024*(c-55296)+i-56320+65536:c}},Vn?Vn(String.prototype,"codePointAt",{value:$n,configurable:!0,writable:!0}):String.prototype.codePointAt=$n),String.fromCodePoint||function(){var r=function(){try{var i={},c=Object.defineProperty,l=c(i,i,i)&&c}catch(f){}return l}(),t=String.fromCharCode,n=Math.floor,o=function(i){var c,l,f=16384,u=[],p=-1,m=arguments.length;if(!m)return"";for(var d="";++p<m;){var y=Number(arguments[p]);if(!isFinite(y)||y<0||y>1114111||n(y)!=y)throw RangeError("Invalid code point: "+y);y<=65535?u.push(y):(c=55296+((y-=65536)>>10),l=y%1024+56320,u.push(c,l)),(p+1==m||u.length>f)&&(d+=t.apply(null,u),u.length=0)}return d};r?r(String,"fromCodePoint",{value:o,configurable:!0,writable:!0}):String.fromCodePoint=o}();try{Un=typeof Intl!="undefined"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch(r){typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var qn,_s=function(t,n,o,i){var c=[],l=[],f=o&&Un&&o.useCollator,u=1;if(o&&o.subcost&&typeof o.subcost=="number"&&(u=o.subcost),t===n)return 0;var p,m,d,y,b=i(t),j=i(n),g=b.length,v=j.length;if(g===0)return v;if(v===0)return g;for(var x=0,G=0;x<g;)l[x]=b[x].codePointAt(0),c[x]=++x;if(f)for(;G<v;)for(p=j[G].codePointAt(0),d=G++,m=G,x=0;x<g;x++)y=Un.compare(String.fromCodePoint(p),String.fromCodePoint(l[x]))===0?d:d+u,d=c[x],m=c[x]=d>m?y>m?m+1:y:y>d?d+1:y;else for(;G<v;)for(p=j[G].codePointAt(0),d=G++,m=G,x=0;x<g;x++)y=p===l[x]?d:d+u,d=c[x],m=c[x]=d>m?y>m?m+1:y:y>d?d+1:y;return m};try{qn=typeof Intl!="undefined"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch(r){typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var Hn,ya=function(t,n,o,i){var c=[],l=[],f=o&&qn&&o.useCollator,u=1;if(o&&o.subcost&&typeof o.subcost=="number"&&(u=o.subcost),t===n)return 0;var p=t.length,m=n.length;if(p===0)return m;if(m===0)return p;if(o&&o.wildcards&&typeof o.wildcards=="string"&&o.wildcards.length>0){var d,y,b,j,g,v;if(o.full_process===!1&&o.processed!==!0){y=(d=o.wildcards[0]).charCodeAt(0);var x="["+function(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(o.wildcards)+"]";if((t=t.replace(new RegExp(x,"g"),d))===(n=n.replace(new RegExp(x,"g"),d)))return 0}else y=(d=o.wildcards[0].toLowerCase()).charCodeAt(0);for(var G=0,W=0;G<p;)l[G]=t.charCodeAt(G),c[G]=++G;if(f)for(;W<m;)for(b=n.charCodeAt(W),g=W++,j=W,G=0;G<p;G++)v=qn.compare(String.fromCharCode(b),String.fromCharCode(l[G]))===0||b===y||l[G]===y?g:g+u,g=c[G],j=c[G]=g>j?v>j?j+1:v:v>g?g+1:v;else for(;W<m;)for(b=n.charCodeAt(W),g=W++,j=W,G=0;G<p;G++)v=b===l[G]||b===y||l[G]===y?g:g+u,g=c[G],j=c[G]=g>j?v>j?j+1:v:v>g?g+1:v;return j}return i(t,n,o)};try{Hn=typeof Intl!="undefined"&&Intl.Collator!==void 0?Intl.Collator("generic",{sensitivity:"base"}):null}catch(r){typeof console!==void 0&&console.warn("Collator could not be initialized and wouldn't be used")}var ba=function(t,n,o){var i=[],c=[],l=o&&Hn&&o.useCollator,f=1;if(o&&o.subcost&&typeof o.subcost=="number"&&(f=o.subcost),t===n)return 0;var u,p,m,d,y=t.length,b=n.length;if(y===0)return b;if(b===0)return y;for(var j=0,g=0;j<y;)c[j]=t.charCodeAt(j),i[j]=++j;if(l)for(;g<b;)for(u=n.charCodeAt(g),m=g++,p=g,j=0;j<y;j++)d=Hn.compare(String.fromCharCode(u),String.fromCharCode(c[j]))===0?m:m+f,m=i[j],p=i[j]=m>p?d>p?p+1:d:d>m?m+1:d;else for(;g<b;)for(u=n.charCodeAt(g),m=g++,p=g,j=0;j<y;j++)d=u===c[j]?m:m+f,m=i[j],p=i[j]=m>p?d>p?p+1:d:d>m?m+1:d;return p};(function(r,t){if(!r.setImmediate){var n,o=1,i={},c=!1,l=r.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(r);f=f&&f.setTimeout?f:r,{}.toString.call(r.process)==="[object process]"?function(){n=function(d){process.nextTick(function(){p(d)})}}():function(){if(r.postMessage&&!r.importScripts){var d=!0,y=r.onmessage;return r.onmessage=function(){d=!1},r.postMessage("","*"),r.onmessage=y,d}}()?function(){var d="setImmediate$"+Math.random()+"$",y=function(b){b.source===r&&typeof b.data=="string"&&b.data.indexOf(d)===0&&p(+b.data.slice(d.length))};r.addEventListener?r.addEventListener("message",y,!1):r.attachEvent("onmessage",y),n=function(b){r.postMessage(d+b,"*")}}():r.MessageChannel?function(){var d=new MessageChannel;d.port1.onmessage=function(y){p(y.data)},n=function(y){d.port2.postMessage(y)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var d=l.documentElement;n=function(y){var b=l.createElement("script");b.onreadystatechange=function(){p(y),b.onreadystatechange=null,d.removeChild(b),b=null},d.appendChild(b)}}():function(){n=function(d){setTimeout(p,0,d)}}(),f.setImmediate=function(d){typeof d!="function"&&(d=new Function(""+d));for(var y=new Array(arguments.length-1),b=0;b<y.length;b++)y[b]=arguments[b+1];var j={callback:d,args:y};return i[o]=j,n(o),o++},f.clearImmediate=u}function u(m){delete i[m]}function p(m){if(c)setTimeout(p,0,m);else{var d=i[m];if(d){c=!0;try{(function(b){var j=b.callback,g=b.args;switch(g.length){case 0:j();break;case 1:j(g[0]);break;case 2:j(g[0],g[1]);break;case 3:j(g[0],g[1],g[2]);break;default:j.apply(void 0,g)}})(d)}finally{u(m),c=!1}}}}})(typeof self=="undefined"?Ue:self);var As={astral:!1,natives:!1},Nt={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},br={},wr={},nr={},Yn=[],js={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},Gs=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,Ps=Nt.exec.call(/()??/,"")[1]===void 0,Os=/x/.flags!==void 0,wa={}.toString;function Xn(r){var t=!0;try{new RegExp("",r)}catch(n){t=!1}return t&&r==="y"?new RegExp("aa|.","y").test("b"):t}var Sa=Xn("u"),Kn=Xn("y"),xa={g:!0,i:!0,m:!0,u:Sa,y:Kn};function _a(r,t,n,o,i){var c;if(r.xregexp={captureNames:t},i)return r;if(r.__proto__)r.__proto__=rt.prototype;else for(c in rt.prototype)r[c]=rt.prototype[c];return r.xregexp.source=n,r.xregexp.flags=o&&o.split("").sort().join(""),r}function Sr(r){return Nt.replace.call(r,/([\s\S])(?=[\s\S]*\1)/g,"")}function xr(r,t){if(!rt.isRegExp(r))throw new TypeError("Type RegExp expected");var n=r.xregexp||{},o=function(p){return Os?p.flags:Nt.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(p))[1]}(r),i="",c="",l=null,f=null;return(t=t||{}).removeG&&(c+="g"),t.removeY&&(c+="y"),c&&(o=Nt.replace.call(o,new RegExp("["+c+"]+","g"),"")),t.addG&&(i+="g"),t.addY&&(i+="y"),i&&(o=Sr(o+i)),t.isInternalOnly||(n.source!==void 0&&(l=n.source),n.flags!=null&&(f=i?Sr(n.flags+i):n.flags)),r=_a(new RegExp(t.source||r.source,o),function(p){return!(!p.xregexp||!p.xregexp.captureNames)}(r)?n.captureNames.slice(0):null,l,f,t.isInternalOnly)}function Aa(r){return parseInt(r,16)}function ja(r){return parseInt(r,10).toString(16)}function Hr(r,t){var n,o=r.length;for(n=0;n<o;++n)if(r[n]===t)return n;return-1}function Ga(r,t,n){return Nt.test.call(n.indexOf("x")>-1?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,r.slice(t))}function Pa(r){for(;r.length<4;)r="0"+r;return r}function Oa(r){if(!/^[\w$]$/.test(r))throw new Error("Flag must be a single character A-Za-z0-9_$");xa[r]=!0}function Es(r,t,n,o,i){for(var c,l,f=Yn.length,u=r.charAt(n),p=null;f--;)if(!((l=Yn[f]).leadChar&&l.leadChar!==u||l.scope!==o&&l.scope!=="all"||l.flag&&t.indexOf(l.flag)===-1)&&(c=rt.exec(r,l.regex,n,"sticky"))){p={matchLength:c[0].length,output:l.handler.call(i,c,o,t),reparse:l.reparse};break}return p}function rt(r,t){if(rt.isRegExp(r)){if(t!==void 0)throw new TypeError("Cannot supply flags when copying a RegExp");return xr(r)}if(r=r===void 0?"":String(r),t=t===void 0?"":String(t),rt.isInstalled("astral")&&t.indexOf("A")===-1&&(t+="A"),nr[r]||(nr[r]={}),!nr[r][t]){for(var n,o={hasNamedCapture:!1,captureNames:[]},i="default",c="",l=0,f=function(b,j){var g;if(Sr(j)!==j)throw new SyntaxError("Invalid duplicate regex flag "+j);for(b=Nt.replace.call(b,/^\(\?([\w$]+)\)/,function(v,x){if(Nt.test.call(/[gy]/,x))throw new SyntaxError("Cannot use flag g or y in mode modifier "+v);return j=Sr(j+x),""}),g=0;g<j.length;++g)if(!xa[j.charAt(g)])throw new SyntaxError("Unknown regex flag "+j.charAt(g));return{pattern:b,flags:j}}(r,t),u=f.pattern,p=f.flags;l<u.length;){do(n=Es(u,p,l,i,o))&&n.reparse&&(u=u.slice(0,l)+n.output+u.slice(l+n.matchLength));while(n&&n.reparse);if(n)c+=n.output,l+=n.matchLength||1;else{var m=rt.exec(u,js[i],l,"sticky")[0];c+=m,l+=m.length,m==="["&&i==="default"?i="class":m==="]"&&i==="class"&&(i="default")}}nr[r][t]={pattern:Nt.replace.call(c,/(?:\(\?:\))+/g,"(?:)"),flags:Nt.replace.call(p,/[^gimuy]+/g,""),captures:o.hasNamedCapture?o.captureNames:null}}var d=nr[r][t];return _a(new RegExp(d.pattern,d.flags),d.captures,r,t)}rt.prototype=new RegExp,rt.version="3.1.1-next",rt._clipDuplicates=Sr,rt._hasNativeFlag=Xn,rt._dec=Aa,rt._hex=ja,rt._pad4=Pa,rt.addToken=function(r,t,n){var o,i=(n=n||{}).optionalFlags;if(n.flag&&Oa(n.flag),i)for(i=Nt.split.call(i,""),o=0;o<i.length;++o)Oa(i[o]);Yn.push({regex:xr(r,{addG:!0,addY:Kn,isInternalOnly:!0}),handler:t,scope:n.scope||"default",flag:n.flag,reparse:n.reparse,leadChar:n.leadChar}),rt.cache.flush("patterns")},rt.cache=function(r,t){return wr[r]||(wr[r]={}),wr[r][t]||(wr[r][t]=rt(r,t))},rt.cache.flush=function(r){r==="patterns"?nr={}:wr={}},rt.exec=function(r,t,n,o){var i,c,l,f="g",u=!1;return(i=Kn&&!!(o||t.sticky&&o!==!1))?f+="y":o&&(u=!0,f+="FakeY"),t.xregexp=t.xregexp||{},n=n||0,(l=t.xregexp[f]||(t.xregexp[f]=xr(t,{addG:!0,addY:i,source:u?t.source+"|()":void 0,removeY:o===!1,isInternalOnly:!0}))).lastIndex=n,c=br.exec.call(l,r),u&&c&&c.pop()===""&&(c=null),t.global&&(t.lastIndex=c?l.lastIndex:0),c},rt.isInstalled=function(r){return!!As[r]},rt.isRegExp=function(r){return wa.call(r)==="[object RegExp]"},rt.replace=function(r,t,n,o){var i,c=rt.isRegExp(t),l=t.global&&o!=="one"||o==="all",f=(l?"g":"")+(t.sticky?"y":"")||"noGY",u=t;return c?(t.xregexp=t.xregexp||{},u=t.xregexp[f]||(t.xregexp[f]=xr(t,{addG:!!l,removeG:o==="one",isInternalOnly:!0}))):l&&(u=new RegExp(rt.escape(String(t)),"g")),i=br.replace.call(function(m){if(m==null)throw new TypeError("Cannot convert null or undefined to object");return m}(r),u,n),c&&t.global&&(t.lastIndex=0),i},br.exec=function(r){var t,n,o,i=this.lastIndex,c=Nt.exec.apply(this,arguments);if(c){if(!Ps&&c.length>1&&Hr(c,"")>-1&&(n=xr(this,{removeG:!0,isInternalOnly:!0}),Nt.replace.call(String(r).slice(c.index),n,function(){var l,f=arguments.length;for(l=1;l<f-2;++l)arguments[l]===void 0&&(c[l]=void 0)})),this.xregexp&&this.xregexp.captureNames)for(o=1;o<c.length;++o)(t=this.xregexp.captureNames[o-1])&&(c[t]=c[o]);this.global&&!c[0].length&&this.lastIndex>c.index&&(this.lastIndex=c.index)}return this.global||(this.lastIndex=i),c},br.replace=function(r,t){var n,o,i,c=rt.isRegExp(r);return c?(r.xregexp&&(o=r.xregexp.captureNames),n=r.lastIndex):r+="",i=function(f,u){return wa.call(f)==="[object "+u+"]"}(t,"Function")?Nt.replace.call(String(this),r,function(){var l,f=arguments;if(o)for(f[0]=new String(f[0]),l=0;l<o.length;++l)o[l]&&(f[0][o[l]]=f[l+1]);return c&&r.global&&(r.lastIndex=f[f.length-2]+f[0].length),t.apply(void 0,f)}):Nt.replace.call(this==null?this:String(this),r,function(){var l=arguments;return Nt.replace.call(String(t),Gs,function(f,u,p){var m;if(u){if((m=+u)<=l.length-3)return l[m]||"";if((m=o?Hr(o,u):-1)<0)throw new SyntaxError("Backreference to undefined group "+f);return l[m+1]||""}if(p==="$")return"$";if(p==="&"||+p==0)return l[0];if(p==="`")return l[l.length-1].slice(0,l[l.length-2]);if(p==="'")return l[l.length-1].slice(l[l.length-2]+l[0].length);if(p=+p,!isNaN(p)){if(p>l.length-3)throw new SyntaxError("Backreference to undefined group "+f);return l[p]||""}throw new SyntaxError("Invalid token "+f)})}),c&&(r.global?r.lastIndex=0:r.lastIndex=n),i},br.split=function(r,t){if(!rt.isRegExp(r))return Nt.split.apply(this,arguments);var n,o=String(this),i=[],c=r.lastIndex,l=0;return t=(t===void 0?-1:t)>>>0,rt.forEach(o,r,function(f){f.index+f[0].length>l&&(i.push(o.slice(l,f.index)),f.length>1&&f.index<o.length&&Array.prototype.push.apply(i,f.slice(1)),n=f[0].length,l=f.index+n)}),l===o.length?Nt.test.call(r,"")&&!n||i.push(""):i.push(o.slice(l)),r.lastIndex=c,i.length>t?i.slice(0,t):i},rt.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(r,t){if(r[1]==="B"&&t==="default")return r[0];throw new SyntaxError("Invalid escape "+r[0])},{scope:"all",leadChar:"\\"}),rt.addToken(/\\u{([\dA-Fa-f]+)}/,function(r,t,n){var o=Aa(r[1]);if(o>1114111)throw new SyntaxError("Invalid Unicode code point "+r[0]);if(o<=65535)return"\\u"+Pa(ja(o));if(Sa&&n.indexOf("u")>-1)return r[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")},{scope:"all",leadChar:"\\"}),rt.addToken(/\[(\^?)\]/,function(r){return r[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["}),rt.addToken(/\(\?#[^)]*\)/,function(r,t,n){return Ga(r.input,r.index+r[0].length,n)?"":"(?:)"},{leadChar:"("}),rt.addToken(/\s+|#[^\n]*\n?/,function(r,t,n){return Ga(r.input,r.index+r[0].length,n)?"":"(?:)"},{flag:"x"}),rt.addToken(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."}),rt.addToken(/\\k<([\w$]+)>/,function(r){var t=isNaN(r[1])?Hr(this.captureNames,r[1])+1:+r[1],n=r.index+r[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+r[0]);return"\\"+t+(n===r.input.length||isNaN(r.input.charAt(n))?"":"(?:)")},{leadChar:"\\"}),rt.addToken(/\\(\d+)/,function(r,t){if(!(t==="default"&&/^[1-9]/.test(r[1])&&+r[1]<=this.captureNames.length)&&r[1]!=="0")throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+r[0]);return r[0]},{scope:"all",leadChar:"\\"}),rt.addToken(/\(\?P?<([\w$]+)>/,function(r){if(!isNaN(r[1]))throw new SyntaxError("Cannot use integer as capture name "+r[0]);if(r[1]==="length"||r[1]==="__proto__")throw new SyntaxError("Cannot use reserved word as capture name "+r[0]);if(Hr(this.captureNames,r[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+r[0]);return this.captureNames.push(r[1]),this.hasNamedCapture=!0,"("},{leadChar:"("}),rt.addToken(/\((?!\?)/,function(r,t,n){return n.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n",leadChar:"("});var Jn=rt;(function(r){var t={},n=r._dec,o=r._hex,i=r._pad4;function c(u){return u.replace(/[- _]+/g,"").toLowerCase()}function l(u){var p=/^\\[xu](.+)/.exec(u);return p?n(p[1]):u.charCodeAt(u.charAt(0)==="\\"?1:0)}function f(u){return t[u]["b!"]||(t[u]["b!"]=function(m){var d="",y=-1;return r.forEach(m,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(b){var j=l(b[1]);j>y+1&&(d+="\\u"+i(o(y+1)),j>y+2&&(d+="-\\u"+i(o(j-1)))),y=l(b[2]||b[1])}),y<65535&&(d+="\\u"+i(o(y+1)),y<65534&&(d+="-\\uFFFF")),d}(t[u].bmp))}r.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(u,p,m){var d=u[1]==="P"||!!u[2],y=c(u[4]||u[3]),b=t[y];if(u[1]==="P"&&u[2])throw new SyntaxError("Invalid double negation "+u[0]);if(!t.hasOwnProperty(y))throw new SyntaxError("Unknown Unicode token "+u[0]);if(b.inverseOf){if(y=c(b.inverseOf),!t.hasOwnProperty(y))throw new ReferenceError("Unicode token missing data "+u[0]+" -> "+b.inverseOf);b=t[y],d=!d}if(!b.bmp)throw new SyntaxError("Astral mode required for Unicode token "+u[0]);return p==="class"?d?f(y):b.bmp:(d?"[^":"[")+b.bmp+"]"},{scope:"all",optionalFlags:"A",leadChar:"\\"}),r.addUnicodeData=function(u){for(var p,m=0;m<u.length;++m){if(!(p=u[m]).name)throw new Error("Unicode token requires name");if(!(p.inverseOf||p.bmp||p.astral))throw new Error("Unicode token has no character data "+p.name);t[c(p.name)]=p,p.alias&&(t[c(p.alias)]=p)}r.cache.flush("patterns")},r._getUnicodeProperty=function(u){var p=c(u);return t[p]}})(Jn),function(r){if(!r.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");r.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC"},{name:"N",alias:"Number",bmp:"0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19"}])}(Jn);var ks=Jn,Ea={exports:{}};(function(r){r.exports=function(t,n,o,i){return(r={}).dedupe=function(l,f){var u,p=t(f);if(!n(l)&&typeof l!="object")throw new Error("contains_dupes must be an array or object");if(Object.keys(l).length===0)return typeof console!==void 0&&console.warn("contains_dupes is empty"),[];p.limit&&(typeof console!==void 0&&console.warn("options.limit will be ignored in dedupe"),p.limit=0),p.cutoff&&typeof p.cutoff=="number"||(typeof console!==void 0&&console.warn("Using default cutoff of 70"),p.cutoff=70),p.scorer||(p.scorer=o,typeof console!==void 0&&console.log("Using default scorer 'ratio' for dedupe")),u=p.processor&&typeof p.processor=="function"?p.processor:function(v){return v};var m={};for(var d in l){var y=u(l[d]);if(typeof y!="string"&&!(y instanceof String))throw new Error("Each processed item in dedupe must be a string.");var b=i(y,l,p);p.returnObjects?(b.length===1||(b=b.sort(function(v,x){var G=u(v.choice),W=u(x.choice),T=G.length,C=W.length;return T===C?G<W?-1:1:C-T})),p.keepmap?m[u(b[0].choice)]={item:b[0].choice,key:b[0].key,matches:b}:m[u(b[0].choice)]={item:b[0].choice,key:b[0].key}):(b.length===1||(b=b.sort(function(v,x){var G=u(v[0]),W=u(x[0]),T=G.length,C=W.length;return T===C?G<W?-1:1:C-T})),p.keepmap?m[u(b[0][0])]=[b[0][0],b[0][2],b]:m[u(b[0][0])]=[b[0][0],b[0][2]])}var j=[];for(var g in m)j.push(m[g]);return j},r}})(Ea),function(){var r=Ss,t=xs,n=qt.exports.intersection,o=qt.exports.intersectionWith,i=qt.exports.difference,c=qt.exports.differenceWith,l=qt.exports.uniq,f=qt.exports.uniqWith,u=qt.exports.partialRight,p=qt.exports.forEach,m=qt.exports.keys,d=qt.exports.isArray,y=qt.exports.toArray,b=qt.exports.orderBy,j=_s,g=ya,v=ba,x=function(k,_,E){var R={},S=ks,X=ya,F=ba;function et(V){return V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function at(V){return(typeof V=="string"||V instanceof String)&&V.length>0}R.validate=at,R.process_and_sort=function(B){return at(B)?B.match(/\S+/g).sort().join(" ").trim():""},R.tokenize=function(B,H){if(H&&H.wildcards&&_&&E){var st=E(X,H,F);return _(B.match(/\S+/g),function(J,ut){return st(J,ut)===0})}return k(B.match(/\S+/g))};var Y=S("[^\\pN|\\pL]","g");return R.full_process=function(B,H){if(!(B instanceof String)&&typeof B!="string")return"";var st;if(H&&typeof H=="object"&&H.wildcards&&typeof H.wildcards=="string"&&H.wildcards.length>0){var J=H.wildcards.toLowerCase();if(B=B.toLowerCase(),H.force_ascii){var ut="[^\0 -\x7F|"+et(J)+"]";B=B.replace(new RegExp(ut,"g"),"");var bt="["+et(J)+"]",lt=J[0];B=B.replace(new RegExp(bt,"g"),lt);var Z="[^A-Za-z0-9"+et(J)+"]";st=(B=(B=B.replace(new RegExp(Z,"g")," ")).replace(/_/g," ")).trim()}else{var gt="[^\\pN|\\pL|"+et(J)+"]",Xt=S(gt,"g");B=S.replace(B,Xt," ","all"),bt="["+et(J)+"]",lt=J[0],st=(B=B.replace(new RegExp(bt,"g"),lt)).trim()}}else H&&(H.force_ascii||H===!0)&&(st=(B=B.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim()),st=S.replace(B,Y," ","all").toLowerCase().trim();return H&&H.collapseWhitespace&&(st=st.replace(/\s+/g," ")),st},R.clone_and_set_option_defaults=function(V){if(V&&V.isAClone)return V;var B={isAClone:!0};if(V){var H,st=Object.keys(V);for(H=0;H<st.length;H++)B[st[H]]=V[st[H]]}return B.full_process!==void 0&&B.full_process===!1||(B.full_process=!0),B.force_ascii!==void 0&&B.force_ascii===!0||(B.force_ascii=!1),B.normalize!==void 0&&B.normalize===!1||(B.normalize=!0),B.astral!==void 0&&B.astral===!0&&(B.full_process=!1),B.collapseWhitespace!==void 0&&B.collapseWhitespace===!1||(B.collapseWhitespace=!0),B},R.isCustomFunc=function(V){return typeof V!="function"||V.name!=="token_set_ratio"&&V.name!=="partial_token_set_ratio"&&V.name!=="token_sort_ratio"&&V.name!=="partial_token_sort_ratio"&&V.name!=="QRatio"&&V.name!=="WRatio"&&V.name!=="distance"&&V.name!=="partial_ratio"},R}(l,f,u),G=x.validate,W=x.process_and_sort,T=x.tokenize,C=x.full_process,D=x.clone_and_set_option_defaults,K=x.isCustomFunc,tt=Ea.exports(D,d,Q,Ht).dedupe;function Q(k,_,E){var R=D(E);return k=R.full_process?C(k,R):k,_=R.full_process?C(_,R):_,G(k)&&G(_)?It(k,_,R):0}function ct(k,_,E){var R=D(E);return k=R.full_process?C(k,R):k,_=R.full_process?C(_,R):_,G(k)&&G(_)?$t(k,_,R):0}function dt(k,_,E){var R=D(E);return k=R.full_process?C(k,R):k,_=R.full_process?C(_,R):_,G(k)&&G(_)?(R.partial=!0,$t(k,_,R)):0}function Tt(k,_,E){var R=D(E);return k=R.full_process?C(k,R):k,_=R.full_process?C(_,R):_,G(k)&&G(_)?(R.proc_sorted||(k=W(k),_=W(_)),It(k,_,R)):0}function yt(k,_,E){var R=D(E);return k=R.full_process?C(k,R):k,_=R.full_process?C(_,R):_,G(k)&&G(_)?(R.partial=!0,R.proc_sorted||(k=W(k),_=W(_)),Qt(k,_,R)):0}function Ht(k,_,E){var R,S=D(E);if(d(_))R=_.length;else{if(!(_ instanceof Object))throw new Error("Invalid choices");R=m(_).length}if(!_||R===0)return typeof console!==void 0&&console.warn("No choices"),[];if(S.processor&&typeof S.processor!="function")throw new Error("Invalid Processor");if(S.processor||(S.processor=function(Z){return Z}),S.scorer&&typeof S.scorer!="function")throw new Error("Invalid Scorer");S.scorer||(S.scorer=Q);var X=K(S.scorer);S.cutoff&&typeof S.cutoff=="number"||(S.cutoff=-1);var F=function(Z,gt){return Z};S.full_process&&(F=C,X||(S.processed=!0));var et=!1;X||(k=F(k,S),S.full_process=!1,S.astral&&S.normalize&&(S.normalize=!1,String.prototype.normalize?(et=!0,k=k.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),k.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var at,Y,V,B,H=[],st=!1,J=!1,ut=!1;if(S.scorer.name==="token_sort_ratio"||S.scorer.name==="partial_token_sort_ratio"){var bt=W(k);J=!0}else if(S.scorer.name==="token_set_ratio"||S.scorer.name==="partial_token_set_ratio"){var lt=T(k,S);ut=!0}return S.returnObjects?(V=function(Z,gt){return Z.score-gt.score},B=function(Z,gt){return gt.score-Z.score}):(V=function(Z,gt){return Z[1]-gt[1]},B=function(Z,gt){return gt[1]-Z[1]}),p(_,function(Z,gt){S.tokens=void 0,S.proc_sorted=!1,J?(S.proc_sorted=!0,Z&&Z.proc_sorted?Y=Z.proc_sorted:(Y=F(S.processor(Z),S),Y=W(et?Y.normalize():Y)),at=S.scorer(bt,Y,S)):ut?(Y="x",Z&&Z.tokens?(S.tokens=[lt,Z.tokens],S.trySimple&&(Y=F(S.processor(Z),S))):(Y=F(S.processor(Z),S),S.tokens=[lt,T(et?Y.normalize():Y,S)]),at=S.scorer(k,Y,S)):X?(Y=S.processor(Z),at=S.scorer(k,Y,S)):(typeof(Y=F(S.processor(Z),S))=="string"&&Y.length!==0||(st=!0),et&&typeof Y=="string"&&(Y=Y.normalize()),at=S.scorer(k,Y,S)),at>S.cutoff&&(S.returnObjects?H.push({choice:Z,score:at,key:gt}):H.push([Z,at,gt]))}),st&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),S.limit&&typeof S.limit=="number"&&S.limit>0&&S.limit<R&&!S.unsorted?H=t.nlargest(H,S.limit,V):S.unsorted||(H=H.sort(B)),H}function Yt(k,_,E,R){var S,X,F=D(E);typeof E.abortController=="object"&&(S=E.abortController),typeof E.cancelToken=="object"&&(X=E.cancelToken);var et=256;typeof F.asyncLoopOffset=="number"&&(et=F.asyncLoopOffset<1?1:F.asyncLoopOffset);var at,Y=!1;if(_&&_.length&&d(_))at=_.length,Y=!0;else{if(!(_ instanceof Object))return void R(new Error("Invalid choices"));at=Object.keys(_).length}if(!_||at===0)return typeof console!==void 0&&console.warn("No choices"),void R(null,[]);if(F.processor&&typeof F.processor!="function")R(new Error("Invalid Processor"));else if(F.processor||(F.processor=function(it){return it}),F.scorer&&typeof F.scorer!="function")R(new Error("Invalid Scorer"));else{F.scorer||(F.scorer=Q);var V=K(F.scorer);F.cutoff&&typeof F.cutoff=="number"||(F.cutoff=-1);var B=function(it,_t){return it};F.full_process&&(B=C,V||(F.processed=!0));var H=!1;V||(k=B(k,F),F.full_process=!1,F.astral&&F.normalize&&(F.normalize=!1,String.prototype.normalize?(H=!0,k=k.normalize()):typeof console!==void 0&&console.warn("Normalization not supported in your environment")),k.length===0&&typeof console!==void 0&&console.warn("Processed query is empty string"));var st,J,ut,bt,lt,Z=[],gt=!1,Xt=!1,ve=!1;if(F.scorer.name==="token_sort_ratio"||F.scorer.name==="partial_token_sort_ratio"){var ce=W(k);Xt=!0}else if(F.scorer.name==="token_set_ratio"||F.scorer.name==="partial_token_set_ratio"){var qe=T(k,F);ve=!0}F.returnObjects?(bt=function(it,_t){return it.score-_t.score},lt=function(it,_t){return _t.score-it.score}):(bt=function(it,_t){return it[1]-_t[1]},lt=function(it,_t){return _t[1]-it[1]});var Ae=Object.keys(_);Y?ye(0):ye(Ae[0],0)}function ye(it,_t){(Y||_.hasOwnProperty(it))&&(F.tokens=void 0,F.proc_sorted=!1,Xt?(F.proc_sorted=!0,_[it]&&_[it].proc_sorted?J=_[it].proc_sorted:(J=B(F.processor(_[it]),F),J=W(H?J.normalize():J)),ut=F.scorer(ce,J,F)):ve?(J="x",_[it]&&_[it].tokens?(F.tokens=[qe,_[it].tokens],F.trySimple&&(J=B(F.processor(_[it]),F))):(J=B(F.processor(_[it]),F),F.tokens=[qe,T(H?J.normalize():J,F)]),ut=F.scorer(k,J,F)):V?(J=F.processor(_[it]),ut=F.scorer(k,J,F)):(typeof(J=B(F.processor(_[it]),F))=="string"&&J.length!==0||(gt=!0),H&&typeof J=="string"&&(J=J.normalize()),ut=F.scorer(k,J,F)),st=Y?parseInt(it):it,ut>F.cutoff&&(F.returnObjects?Z.push({choice:_[it],score:ut,key:st}):Z.push([_[it],ut,st]))),S&&S.signal.aborted===!0?R(new Error("aborted")):X&&X.canceled===!0?R(new Error("canceled")):Y&&it<_.length-1?it%et==0?setImmediate(function(){ye(it+1)}):ye(it+1):_t<Ae.length-1?_t%et==0?setImmediate(function(){ye(Ae[_t+1],_t+1)}):ye(Ae[_t+1],_t+1):(gt&&typeof console!==void 0&&console.log("One or more choices were empty. (post-processing if applied)"),F.limit&&typeof F.limit=="number"&&F.limit>0&&F.limit<at&&!F.unsorted?Z=t.nlargest(Z,F.limit,bt):F.unsorted||(Z=Z.sort(lt)),R(null,Z))}}var mt="%*SuperUniqueWildcardKey*%",Ft=!1;function de(k,_){var E=k;if(_.astral){_.normalize&&(String.prototype.normalize?E=k.normalize():Ft||(typeof console!==void 0&&console.warn("Normalization not supported in your environment"),Ft=!0));var R=y(E)}else R=E.split("");var S={};if(_.wildcards)for(var X=0;X<R.length;X++){var F=R[X];_.wildcards.indexOf(F)>-1?S[mt]?S[mt]+=1:S[mt]=1:S[F]?S[F]+=1:S[F]=1}else for(X=0;X<R.length;X++)S[F=R[X]]?S[F]+=1:S[F]=1;return S}function Ct(k,_,E){for(var R=_,S=k.reduce(function(Y,V){return Y[V]=de(V,E),Y},{}),X=R.reduce(function(Y,V){return Y[V]=de(V,E),Y},{}),F=[],et=0;R.length&&et<k.length;){var at=b(R,function(Y){return V=S[k[et]],B=X[Y],H=Object.keys(V),st=Object.keys(B),J=n(H,st).map(function(lt){return V[lt]*B[lt]}).reduce(function(lt,Z){return lt+Z},0),ut=H.map(function(lt){return Math.pow(V[lt],2)}).reduce(function(lt,Z){return lt+Z},0),bt=st.map(function(lt){return Math.pow(B[lt],2)}).reduce(function(lt,Z){return lt+Z},0),J/(Math.sqrt(ut)*Math.sqrt(bt));var V,B,H,st,J,ut,bt},"desc")[0];F.push(at),et++,R=R.filter(function(Y){return Y!==at})}return F.concat(R)}function ge(k,_,E,R){var S=_,X=R;return(_.length>R.length||_.length===R.length&&(k.length>E.length||[k,E].sort()[0]===E))&&(S=R,X=_),[S,X]}function xe(k,_,E){if(E.tokens)R=E.tokens[0],S=E.tokens[1];else var R=T(k,E),S=T(_,E);var X=ge(k,R.sort(),_,S.sort()),F=X[0];let et=Ct(F,X[1],E);return E.partial?Qt(F.join(" "),et.join(" "),E):It(F.join(" "),et.join(" "),E)}function $t(k,_,E){if(E.tokens)R=E.tokens[0],S=E.tokens[1];else var R=T(k,E),S=T(_,E);if(E.wildcards)var X=u(g,E,v),F=function(ce,qe){return X(ce,qe)===0},et=o(R,S,F),at=c(R,S,F),Y=c(S,R,F);else et=n(R,S),at=i(R,S),Y=i(S,R);var V=et.sort().join(" "),B=at.sort(),H=Y.sort();if(E.sortBySimilarity)var st=ge(k,B,_,H),J=st[0],ut=st[1],bt=J.join(" "),lt=Ct(J,ut,E).join(" ");else bt=B.join(" "),lt=H.join(" ");var Z=V+" "+bt,gt=V+" "+lt;V=V.trim(),Z=Z.trim(),gt=gt.trim();var Xt=It;if(E.partial&&(Xt=Qt,V.length>0))return 100;var ve=[Xt(V,Z,E),Xt(V,gt,E),Xt(Z,gt,E)];return E.trySimple&&ve.push(Xt(k,_,E)),Math.max.apply(null,ve)}var ae,Zt,Lt,ie,se=!1;function It(k,_,E){if(!G(k)||!G(_))return 0;if(E.ratio_alg&&E.ratio_alg==="difflib"){var R=new r(null,k,_).ratio();return Math.round(100*R)}var S,X;return E.subcost===void 0&&(E.subcost=2),E.astral?(E.normalize&&(String.prototype.normalize?(k=k.normalize(),_=_.normalize()):se||(typeof console!==void 0&&console.warn("Normalization not supported in your environment"),se=!0)),S=j(k,_,E,y),X=y(k).length+y(_).length):E.wildcards?(S=g(k,_,E,v),X=k.length+_.length):(S=v(k,_,E),X=k.length+_.length),Math.round((X-S)/X*100)}function Qt(k,_,E){if(!G(k)||!G(_))return 0;if(k.length<=_.length)var R=k,S=_;else R=_,S=k;for(var X=new r(null,R,S).getMatchingBlocks(),F=[],et=0;et<X.length;et++){var at=X[et][1]-X[et][0]>0?X[et][1]-X[et][0]:0,Y=at+R.length,V=It(R,S.substring(at,Y),E);if(V>99.5)return 100;F.push(V)}return Math.max.apply(null,F)}Object.keys||(Object.keys=(ae=Object.prototype.hasOwnProperty,Zt=!{toString:null}.propertyIsEnumerable("toString"),ie=(Lt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(k){if(typeof k!="object"&&(typeof k!="function"||k===null))throw new TypeError("Object.keys called on non-object");var _,E,R=[];for(_ in k)ae.call(k,_)&&R.push(_);if(Zt)for(E=0;E<ie;E++)ae.call(k,Lt[E])&&R.push(Lt[E]);return R}));var _e=void 0;typeof Promise!="undefined"&&(_e=function(k,_,E){return new Promise(function(R,S){Yt(k,_,E,function(X,F){X?S(X):R(F)})})});var he={distance:function(_,E,R){var S=D(R);return _=S.full_process?C(_,S):_,E=S.full_process?C(E,S):E,S.subcost===void 0&&(S.subcost=1),S.astral?j(_,E,S,y):g(_,E,S,v)},ratio:Q,partial_ratio:function(_,E,R){var S=D(R);return _=S.full_process?C(_,S):_,E=S.full_process?C(E,S):E,G(_)&&G(E)?Qt(_,E,S):0},token_set_ratio:ct,token_sort_ratio:Tt,partial_token_set_ratio:dt,partial_token_sort_ratio:yt,token_similarity_sort_ratio:function(_,E,R){var S=D(R);return _=S.full_process?C(_,S):_,E=S.full_process?C(E,S):E,G(_)&&G(E)?xe(_,E,S):0},partial_token_similarity_sort_ratio:function(_,E,R){var S=D(R);return _=S.full_process?C(_,S):_,E=S.full_process?C(E,S):E,G(_)&&G(E)?(S.partial=!0,xe(_,E,S)):0},WRatio:function(_,E,R){var S=D(R);if(_=S.full_process?C(_,S):_,E=S.full_process?C(E,S):E,S.full_process=!1,!G(_)||!G(E))return 0;var X=!0,F=.95,et=.9,at=It(_,E,S),Y=Math.max(_.length,E.length)/Math.min(_.length,E.length);if(Y<1.5&&(X=!1),Y>8&&(et=.6),X){var V=Qt(_,E,S)*et,B=yt(_,E,S)*F*et,H=dt(_,E,S)*F*et;return Math.round(Math.max(at,V,B,H))}var st=Tt(_,E,S)*F,J=ct(_,E,S)*F;return Math.round(Math.max(at,st,J))},full_process:C,extract:Ht,extractAsync:Yt,extractAsPromised:_e,process_and_sort:W,unique_tokens:T,dedupe:tt};ha.exports=he}();var Dt=ha.exports,vm=Dt.distance,ym=Dt.ratio,bm=Dt.partial_ratio,wm=Dt.token_set_ratio,Sm=Dt.token_sort_ratio,xm=Dt.partial_token_set_ratio,_m=Dt.partial_token_sort_ratio,Am=Dt.token_similarity_sort_ratio,jm=Dt.partial_token_similarity_sort_ratio,Gm=Dt.WRatio,Pm=Dt.full_process,Yr=Dt.extract,Om=Dt.extractAsync,Em=Dt.extractAsPromised,km=Dt.process_and_sort,Rm=Dt.unique_tokens,Tm=Dt.dedupe;var _r=class{constructor(t,n){this.key=t;this.steamId=n}tryGetGame(t){return q(this,null,function*(){var n,o;try{let i=yield this.getOwnedGames(),c=Yr(t,i,{processor:l=>l.name,limit:1,cutoff:80,returnObjects:!0});return(o=(n=c==null?void 0:c[0])==null?void 0:n.choice)!=null?o:null}catch(i){throw console.warn("[Game Search][Steam API][tryGetGame]"+i),i}})}getOwnedGames(){return q(this,null,function*(){var t;try{let n=new URL("http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/");n.searchParams.append("key",this.key),n.searchParams.append("steamid",this.steamId),n.searchParams.append("include_appinfo","true"),n.searchParams.append("format","json");let i=(yield(0,or.requestUrl)({url:n.href,method:"GET"})).json;return((t=i==null?void 0:i.response)==null?void 0:t.game_count)<=0?[]:i.response.games}catch(n){throw console.warn("[Game Search][Steam API][getOwnedGames]"+n),n}})}getWishlist(){return q(this,null,function*(){try{let t=new URL("https://store.steampowered.com/wishlist/profiles/"+this.steamId+"/wishlistdata/"),n=yield(0,or.requestUrl)({url:t.href,method:"GET"}),o=new Map;for(let[i,c]of Object.entries(n.json))o.set(parseInt(i),c);return o}catch(t){throw console.warn("[Game Search][Steam API][getWishlist]"+t),t}})}getPlayerStatsForGames(t){return q(this,null,function*(){var n,o;try{let i=new URL("http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/");i.searchParams.append("key",this.key),i.searchParams.append("format","json");let c="",l="%2C%20";for(let m of t)c+=`${m}${l}`;let f=`%22appids_filter%22%3A%20%5B${c.substring(0,c.length-l.length)}%5D%2C%20%22steamid%22%3A%20${this.steamId}`,u=yield(0,or.requestUrl)({url:`${i.href}&input_json={${f}}`,method:"GET"}),p=(o=(n=u==null?void 0:u.json)==null?void 0:n.response)==null?void 0:o.games;if(p){let m={};for(let d of p)m[d.appid]={playtime_forever:d.playtime_forever,playtime_2weeks:d.playtime_2weeks};return m}return}catch(i){throw console.warn("[Game Search][Steam API][getWishlist]"+i),i}})}getPlayerAchievmentsForGame(t){return q(this,null,function*(){var n,o,i,c,l,f;try{let u=new URL("http://api.steampowered.com/ISteamUserStats/GetUserStatsForGame/v0002/");u.searchParams.append("key",this.key),u.searchParams.append("format","json"),u.searchParams.append("steamid",this.steamId),u.searchParams.append("appid",t);let p=new URL("https://api.steampowered.com/ISteamUserStats/GetSchemaForGame/v2");p.searchParams.append("key",this.key),p.searchParams.append("format","json"),p.searchParams.append("steamid",this.steamId),p.searchParams.append("appid",t);let m=yield(0,or.requestUrl)({url:p.href,method:"GET"}),d=yield(0,or.requestUrl)({url:u.href,method:"GET"}),y=[];return((c=(i=(o=(n=d==null?void 0:d.json)==null?void 0:n.playerstats)==null?void 0:o.achievements)==null?void 0:i.length)!=null?c:0)>0&&((f=(l=d==null?void 0:d.json)==null?void 0:l.playerstats)==null||f.achievements.filter(b=>b.achieved).forEach(b=>q(this,null,function*(){let j=m.json.game.availableGameStats.achievements.first(g=>g.name===b.name);j&&y.push(j)}))),y}catch(u){throw console.warn("[Game Search][Steam API][getPlayerAchievementsForGame]"+u),u}})}};var Xr=Jt(require("obsidian"));function ka(r,t){return q(this,null,function*(){let{metadataCache:n,vault:o}=r,i=(0,Xr.normalizePath)(t!=null?t:"");if(t==="/")return Promise.resolve("");try{let c=n.getFirstLinkpathDest(i,"");return c?o.cachedRead(c):""}catch(c){return console.error(`[Game Search][Templating] Failed to read the games template '${i}'`,c),new Xr.Notice("Failed to read the games template"),""}})}function Ra(r){return r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(t,n,o,i,c,l)=>{let f=window.moment(),u=window.moment().clone().set({hour:f.get("hour"),minute:f.get("minute"),second:f.get("second")});return o&&u.add(parseInt(i,10),c),l?u.format(l.substring(1).trim()):u.format("YYYY-MM-DD")})}function Zn(r,t){let n=/<%(?:=)(.+)%>/g,o=Rs();return[...t.matchAll(n)].reduce((c,[l,f])=>{try{let u=new o(["const [game] = arguments",`const output = ${f}`,'if(typeof output === "string") return output',"return JSON.stringify(output)"].join(";"))(r);return c.replace(l,u)}catch(u){console.warn("[Game Search][Templating] "+u)}return c},t)}function Rs(){try{return new Function("return (function(){}).constructor")()}catch(r){throw console.warn("[Game Search][Templating] "+r),r instanceof SyntaxError?Error("Bad template syntax"):r}}function Ta(r,t){return q(this,null,function*(){let n=r.plugins.plugins["templater-obsidian"];n&&!(n==null?void 0:n.settings.trigger_on_file_creation)&&(yield n.templater.overwrite_file_commands(t))})}var ar=Jt(require("obsidian"));function Fa(r,t,n,o,i,c,l,f,u,p,m){return q(this,null,function*(){var j;let d;try{let g=yield o.getByQuery(i,!0),v=Yr(i,g,{processor:x=>x.name,limit:1,cutoff:80,returnObjects:!0});d=(j=v==null?void 0:v[0])==null?void 0:j.choice}catch(g){console.warn("[Game Search][Steam Sync][ERROR] getting RAWG game for "+m+" game "+i),console.warn(g)}if(!d){new ar.Notice("Unable to sync "+m+" game "+i),console.warn("[Game Search][Steam Sync] wishlist SKIPPING! "+i);return}let y=Mr(d,t.fileNameFormat),b=r.getAbstractFileByPath((0,ar.normalizePath)(t.folder+"/"+y));if(b)console.info("[Game Search][Steam Sync]: found match for vault file: "+b.name+" and "+m+" game: "+i),n.processFrontMatter(b,g=>{if(g.steamId=c,g.steamPlaytimeForever=l,g.steamPlaytime2Weeks=f,p&&p instanceof Map)for(let[v,x]of p)g[v.trim()]=x.trim();return g});else{console.info("[Game Search][Steam Sync] creating note for "+i);try{let g=yield o.getBySlugOrId(d.slug,!0);yield u({game:g,steamId:c,steamPlaytimeForever:l,steamPlaytime2Weeks:f,overwriteFile:!1},!1,p)}catch(g){console.warn("[Game Search][Steam Sync][ERROR] getting details and writing file for steam game "+i),console.warn(g)}}})}function Ca(r,t,n,o,i,c,l){return q(this,null,function*(){if(!i)return;console.info("[Game Search][Steam Sync]: fetching wishlist from steam api");let f=yield i.getWishlist(),u=0,p=f.size;for(let[m,d]of f)yield Fa(r,t,n,o,d.name,m,0,0,c,ee(t.metaDataForWishlistedSteamGames),"wishlisted steam"),l(++u/p)})}function Ia(r,t,n,o,i,c,l){return q(this,null,function*(){if(!i)return;console.info("[Game Search][Steam Sync]: fetching owned games from steam api");let f=yield i.getOwnedGames();console.info("[Game Search][Steam Sync]: begin steam game directory iteration");let u=0,p=f.length;for(let m=0;m<f.length;m++){let d=f[m];yield Fa(r,t,n,o,d.name,d.appid,d.playtime_forever,d.playtime_2weeks,c,ee(t.metaDataForOwnedSteamGames),"owned steam"),l(++u/p)}})}function Wa(r,t,n,o){return q(this,null,function*(){let i=(0,ar.normalizePath)(o.folder),c=r.getFolderByPath(i),l=[],f=p=>q(this,null,function*(){for(let m of c.children){let d=m;!!d&&d.name.includes(".md")&&(yield p(d))}}),u=yield n.getPlayerStatsForGames(l);u&&f(p=>q(this,null,function*(){t.processFrontMatter(p,m=>(m.steamId&&u[m.steamId]&&(m.steamPlaytimeForever=u[m.steamId].playtime_forever,m.steamPlaytime2Weeks=u[m.steamId].playtime_2weeks),m))}))})}function Ma(r,t,n,o){return q(this,null,function*(){let i=(0,ar.normalizePath)(o.folder),c=r.getFolderByPath(i);(f=>q(this,null,function*(){for(let u of c.children){let p=u;!!p&&p.name.includes(".md")&&(yield f(p))}}))(f=>q(this,null,function*(){t.processFrontMatter(f,u=>q(this,null,function*(){u.steamId&&(yield n.getPlayerAchievmentsForGame(u.steamId))}))}))})}var Qn=class extends jt.Plugin{onload(){return q(this,null,function*(){console.info(`[Game Search][Info] version ${this.manifest.version} (requires obsidian ${this.manifest.minAppVersion})`),yield this.loadSettings(),this.rawgApi=new Ur(this.settings.rawgApiKey),this.settings.syncSteamOnStart&&this.syncSteam(!1),this.settings.syncSteamPlaytimeOnStart&&this.syncSteamPlaytime(!1),this.addRibbonIcon("gamepad-2","Create new game note",()=>this.createNewGameNote(null)).addClass("obsidian-game-search-plugin-ribbon-class"),this.addCommand({id:"open-game-search-modal",name:"Create new game note",callback:()=>this.createNewGameNote(void 0)}),this.addCommand({id:"open-game-search-modal-to-insert",name:"Insert the metadata",editorCallback:()=>this.insertMetadata()}),this.addCommand({id:"sync steam",name:"Sync Steam",callback:()=>this.syncSteam(!0)}),this.addCommand({id:"sync steam playtime",name:"Sync Steam Playtime",callback:()=>this.syncSteamPlaytime(!0)}),this.addCommand({id:"sync steam achievements",name:"Sync Steam Achievements",callback:()=>this.syncSteamAchievements(!0)}),this.addSettingTab(new Dn(this.app,this))})}showNotice(t){try{new jt.Notice(t==null?void 0:t.toString())}catch(n){}}searchGameMetadata(t){return q(this,null,function*(){let n=yield this.openGameSearchModal(t);return yield this.openGameSuggestModal(n)})}getRenderedContents(t){return q(this,null,function*(){let{templateFile:n}=this.settings,o=yield ka(this.app,n),i=Sn(t,Ra(o));return Zn(t,i)})}insertMetadata(){return q(this,null,function*(){try{let t=this.app.workspace.getActiveViewOfType(jt.MarkdownView);if(!t){console.warn("[Game Search][Insert Metadata] Can not find an active markdown view");return}let n=yield this.searchGameMetadata(t.file.basename);if(!t.editor){console.warn("[Game Search][Insert Metadata] Can not find editor from the active markdown view");return}let o=yield this.getRenderedContents(n);t.editor.replaceRange(o,{line:0,ch:0})}catch(t){console.warn("[Game Search][Insert Metadata][unexepected] "+t),this.showNotice(t)}})}regenerateAllGameNotesMetadata(){return q(this,null,function*(){new vn(this.app,()=>{let t=new jt.Notice("regenerating game metadata",0),n=new jt.ProgressBarComponent(t.noticeEl),o=this.app.vault.getAbstractFileByPath((0,jt.normalizePath)(this.settings.folder)),i=0,c=o.children.length;jt.Vault.recurseChildren(o,l=>q(this,null,function*(){var u,p,m,d,y,b;let f=l;if(!!f&&f.name.includes(".md"))try{let j=yield this.parseFileMetadata(l),g=(d=(m=(p=(u=j.id)!=null?u:j.Id)!=null?p:j.slug)!=null?m:j.Slug)!=null?d:null,v=null;if(g)v=yield this.rawgApi.getBySlugOrId(g);else{let x=yield this.rawgApi.getByQuery((b=(y=j.name)!=null?y:j.name)!=null?b:f.name);v=yield this.rawgApi.getBySlugOrId(x[0].slug)}if(v){let x=yield this.app.vault.read(f),G;x.indexOf("---")===0&&(G=ee(x.match(/---[\S\s]*?---/)[0]));let W=yield this.getRenderedContents(v),T=G;if(W.indexOf("---")===0){let D=W.match(/---[\S\s]*?---/);D.length>0&&(T=ee(D[0]))}if(T instanceof Map&&G instanceof Map){let D=K=>{G.has(K)&&T.set(K,G.get(K))};if(D("steamId"),D("steamPlaytimeForever"),D("steamPlaytime2Weeks"),this.settings.metaDataForWishlistedSteamGames&&ee(this.settings.metaDataForWishlistedSteamGames)instanceof Map)for(let[tt,Q]of this.settings.metaDataForWishlistedSteamGames)G.has(tt)&&T.set(tt,Q);if(this.settings.metaDataForOwnedSteamGames&&ee(this.settings.metaDataForOwnedSteamGames)instanceof Map)for(let[tt,Q]of ee(this.settings.metaDataForOwnedSteamGames))G.has(tt)&&T.set(tt,Q)}x.indexOf("---")===0?x=x.replace(/---[\S\s]*?---/,`---
`+Ke(T)+`
---`):T&&(x=`---
`+Ke(T)+`
---
`+x),yield this.app.vault.modify(f,Zn(v,x));let C=++i/c;n.setValue(C*100),C>=1&&t.setMessage("game notes regeneration complete")}}catch(j){console.error("[GameSearch][Regen] unexpected error regenerating file "+f.name)}}))}).open()})}syncSteamAchievements(t){return q(this,null,function*(){this.steamApi===void 0&&this.settings.steamApiKey&&this.settings.steamUserId&&(console.info("[Game Search][Steam Sync]: initializing steam api"),this.steamApi=new _r(this.settings.steamApiKey,this.settings.steamUserId)),this.steamApi!==void 0?(new jt.Notice("syncing steam achievements"),yield Ma(this.app.vault,this.app.fileManager,this.steamApi,this.settings),new jt.Notice("steam achievements sync complete")):t&&(console.warn("[Game Search][SteamSync]: steam api not initialized"),this.showNotice("Steam Api not initialized. Did you enter your steam API key and user Id in plugin settings?"))})}syncSteamPlaytime(t){return q(this,null,function*(){this.steamApi===void 0&&this.settings.steamApiKey&&this.settings.steamUserId&&(console.info("[Game Search][Steam Sync]: initializing steam api"),this.steamApi=new _r(this.settings.steamApiKey,this.settings.steamUserId)),this.steamApi!==void 0?(new jt.Notice("syncing steam playtime"),yield Wa(this.app.vault,this.app.fileManager,this.steamApi,this.settings),new jt.Notice("steam playtime sync complete")):t&&(console.warn("[Game Search][SteamSync]: steam api not initialized"),this.showNotice("Steam Api not initialized. Did you enter your steam API key and user Id in plugin settings?"))})}syncSteam(t){return q(this,null,function*(){if(this.steamApi===void 0&&this.settings.steamApiKey&&this.settings.steamUserId&&(console.info("[Game Search][Steam Sync]: initializing steam api"),this.steamApi=new _r(this.settings.steamApiKey,this.settings.steamUserId)),this.steamApi!==void 0){let n=new jt.Notice("syncing steam games (owned)",0),o=new jt.ProgressBarComponent(n.noticeEl);yield Ia(this.app.vault,this.settings,this.app.fileManager,this.rawgApi,this.steamApi,(i,c,l)=>q(this,null,function*(){return yield this.createNewGameNote(i,c,l)}),i=>o.setValue(i*100/2)),n.setMessage("syncing steam games (wishlist)"),o=new jt.ProgressBarComponent(n.noticeEl),yield Ca(this.app.vault,this.settings,this.app.fileManager,this.rawgApi,this.steamApi,(i,c,l)=>q(this,null,function*(){return yield this.createNewGameNote(i,c,l)}),i=>o.setValue(50+i*100/2)),n.setMessage("steam sync complete")}else t&&(console.warn("[Game Search][SteamSync]: steam api not initialized"),this.showNotice("Steam Api not initialized. Did you enter your steam API key and user Id in plugin settings?"))})}parseFileMetadata(t){return q(this,null,function*(){let n=this.app.fileManager;return new Promise(o=>{n.processFrontMatter(t,i=>{o(i)})})})}createNewGameNote(t,n=!0,o){return q(this,null,function*(){var i;try{let c=(i=t==null?void 0:t.game)!=null?i:yield this.searchGameMetadata();if(!(t==null?void 0:t.steamId)&&this.settings.tryFindSteamGameOnCreate&&this.steamApi&&this.settings.steamApiKey&&this.settings.steamUserId){let d=yield this.steamApi.tryGetGame(c.name);d&&(t={game:null,steamId:d.appid,steamPlaytimeForever:d.playtime_forever,steamPlaytime2Weeks:d.playtime_2weeks})}let l=this.app.workspace.getLeaf();if(!l){console.warn("[Game Search][Create Game Note] No active leaf");return}let f=yield this.getRenderedContents(c),u=Mr(c,this.settings.fileNameFormat),p=`${this.settings.folder}/${u}`,m=yield this.app.vault.create(p,f);yield Ta(this.app,m),t&&t.steamId&&this.app.fileManager.processFrontMatter(m,d=>{if(d.steamId=t.steamId,d.steamPlaytimeForever=t.steamPlaytimeForever,d.steamPlaytime2Weeks=t.steamPlaytime2Weeks,o&&o instanceof Map)for(let[y,b]of o)d[y]=b;return d}),n&&(yield l.openFile(m,{state:{mode:"source"}}),l.setEphemeralState({rename:"all"}),yield new yn(this.app).jumpToNextCursorLocation())}catch(c){console.warn("[Game Search][Create Game Note][unexpected] "+c),c.message.toLowerCase().contains("already exists")||this.showNotice(c)}})}openGameSearchModal(t=""){return q(this,null,function*(){return new Promise((n,o)=>new gn(this,this.rawgApi,t,(i,c)=>i?o(i):n(c)).open())})}openGameSuggestModal(t){return q(this,null,function*(){return new Promise((n,o)=>new hn(this.app,this.rawgApi,t,(i,c)=>i?o(i):n(c)).open())})}loadSettings(){return q(this,null,function*(){this.settings=Object.assign({},da,yield this.loadData())})}saveSettings(){return q(this,null,function*(){yield this.saveData(this.settings),this.rawgApi=new Ur(this.settings.rawgApiKey)})}};
/*!
 * XRegExp 3.1.1-next
 * <xregexp.com>
 * Steven Levithan (c) 2007-2016 MIT License
 */
/*!
 * XRegExp Unicode Base 3.1.1-next
 * <xregexp.com>
 * Steven Levithan (c) 2008-2016 MIT License
 */
/**
 * @license
 * Lodash (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash include="intersection,difference,uniq,intersectionWith,differenceWith,uniqWith,toArray,partialRight,keys,isArray,forEach,orderBy" -p -o ./lib/lodash.custom.min.js`
 */

/* nosourcemap */